{"version":3,"file":"index.umd.js","sources":["../src/enhancers/helpers/index.ts","../../../../node_modules/.pnpm/@rollup+plugin-typescript@11.1.6_rollup@4.14.3_tslib@2.6.3_typescript@5.4.5/node_modules/tslib/tslib.es6.js","../../../../node_modules/.pnpm/jwt-decode@4.0.0/node_modules/jwt-decode/build/esm/index.js","../../core-js-sdk/dist/index.esm.js","../src/enhancers/withAutoRefresh/helpers.ts","../src/enhancers/helpers/logger.ts","../src/constants.ts","../../../../node_modules/.pnpm/js-cookie@3.0.5/node_modules/js-cookie/dist/js.cookie.mjs","../src/enhancers/withPersistTokens/constants.ts","../src/enhancers/withPersistTokens/helpers.ts","../src/enhancers/withFingerprint/constants.ts","../../../../node_modules/.pnpm/@fingerprintjs+fingerprintjs-pro@3.9.9/node_modules/@fingerprintjs/fingerprintjs-pro/dist/fp.esm.min.js","../src/enhancers/withFingerprint/helpers.ts","../src/enhancers/withFingerprint/index.ts","../src/enhancers/withLastLoggedInUser/constants.ts","../src/enhancers/withLastLoggedInUser/helpers.ts","../src/enhancers/withLastLoggedInUser/index.ts","../src/enhancers/withNotifications/helpers.ts","../src/enhancers/withNotifications/index.ts","../src/enhancers/withPersistTokens/index.ts","../src/sdk/webauthn.ts","../src/apiPaths.ts","../src/sdk/fedcm.ts","../src/sdk/flow.ts","../src/sdk/index.ts","../src/index.ts","../src/enhancers/helpers/compose.ts","../src/enhancers/withAutoRefresh/index.ts","../src/enhancers/withAnalytics.ts","../src/index.umd.ts"],"sourcesContent":["import { JWTResponse, UserResponse } from '@descope/core-js-sdk';\nimport { CoreSdkConfig } from '../../types';\n\n/**\n * Add hooks to an existing core-sdk config\n */\nexport const addHooks = <Config extends CoreSdkConfig>(\n  config: Config,\n  hooks: Config['hooks'],\n): Config => {\n  ['beforeRequest', 'afterRequest'].reduce(\n    (acc, key) => {\n      acc[key] = []\n        .concat(config.hooks?.[key] || [])\n        .concat(hooks?.[key] || []);\n\n      return acc;\n    },\n    (config.hooks ??= {}),\n  );\n\n  return config;\n};\n\nexport { compose } from './compose';\n\n/**\n * Extract auth info (JWT response) from fetch response\n * We assume that the auth info is under a \"authInfo\" attribute (flow response)\n * Or the body itself (other auth methods response)\n */\nexport const getAuthInfoFromResponse = async (\n  res: Response,\n): Promise<Partial<JWTResponse>> => {\n  if (!res?.ok) return {};\n  const body = await res?.clone().json();\n  return body?.authInfo || body || {};\n};\n\n/**\n * Extract user from fetch response\n * User my exist under \"user\" attribute (auth methods response)\n * Or the body itself (when calling \"me\")\n */\nexport const getUserFromResponse = async (\n  res: Response,\n): Promise<UserResponse> | undefined => {\n  const authInfo = await getAuthInfoFromResponse(res);\n\n  return (\n    authInfo?.user ||\n    (authInfo?.hasOwnProperty('userId')\n      ? (authInfo as UserResponse)\n      : undefined)\n  );\n};\n\nexport const isLocalStorage = typeof localStorage !== 'undefined';\n\nexport const setLocalStorage = (key: string, value: string) =>\n  isLocalStorage && localStorage?.setItem(key, value);\nexport const getLocalStorage = (key: string) =>\n  isLocalStorage && localStorage?.getItem(key);\nexport const removeLocalStorage = (key: string) =>\n  isLocalStorage && localStorage?.removeItem(key);\n","/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise, SuppressedError, Symbol */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\r\n    function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\r\n    var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\r\n    var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\r\n    var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\r\n    var _, done = false;\r\n    for (var i = decorators.length - 1; i >= 0; i--) {\r\n        var context = {};\r\n        for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\r\n        for (var p in contextIn.access) context.access[p] = contextIn.access[p];\r\n        context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\r\n        var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\r\n        if (kind === \"accessor\") {\r\n            if (result === void 0) continue;\r\n            if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\r\n            if (_ = accept(result.get)) descriptor.get = _;\r\n            if (_ = accept(result.set)) descriptor.set = _;\r\n            if (_ = accept(result.init)) initializers.unshift(_);\r\n        }\r\n        else if (_ = accept(result)) {\r\n            if (kind === \"field\") initializers.unshift(_);\r\n            else descriptor[key] = _;\r\n        }\r\n    }\r\n    if (target) Object.defineProperty(target, contextIn.name, descriptor);\r\n    done = true;\r\n};\r\n\r\nexport function __runInitializers(thisArg, initializers, value) {\r\n    var useValue = arguments.length > 2;\r\n    for (var i = 0; i < initializers.length; i++) {\r\n        value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\r\n    }\r\n    return useValue ? value : void 0;\r\n};\r\n\r\nexport function __propKey(x) {\r\n    return typeof x === \"symbol\" ? x : \"\".concat(x);\r\n};\r\n\r\nexport function __setFunctionName(f, name, prefix) {\r\n    if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\r\n    return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\r\n};\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n        desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\", awaitReturn), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function awaitReturn(f) { return function (v) { return Promise.resolve(v).then(f, reject); }; }\r\n    function verb(n, f) { if (g[n]) { i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; if (f) i[n] = f(i[n]); } }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n\r\nexport function __classPrivateFieldIn(state, receiver) {\r\n    if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\r\n    return typeof state === \"function\" ? receiver === state : state.has(receiver);\r\n}\r\n\r\nexport function __addDisposableResource(env, value, async) {\r\n    if (value !== null && value !== void 0) {\r\n        if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\r\n        var dispose, inner;\r\n        if (async) {\r\n            if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\r\n            dispose = value[Symbol.asyncDispose];\r\n        }\r\n        if (dispose === void 0) {\r\n            if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\r\n            dispose = value[Symbol.dispose];\r\n            if (async) inner = dispose;\r\n        }\r\n        if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\r\n        if (inner) dispose = function() { try { inner.call(this); } catch (e) { return Promise.reject(e); } };\r\n        env.stack.push({ value: value, dispose: dispose, async: async });\r\n    }\r\n    else if (async) {\r\n        env.stack.push({ async: true });\r\n    }\r\n    return value;\r\n\r\n}\r\n\r\nvar _SuppressedError = typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\r\n    var e = new Error(message);\r\n    return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\r\n};\r\n\r\nexport function __disposeResources(env) {\r\n    function fail(e) {\r\n        env.error = env.hasError ? new _SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\r\n        env.hasError = true;\r\n    }\r\n    function next() {\r\n        while (env.stack.length) {\r\n            var rec = env.stack.pop();\r\n            try {\r\n                var result = rec.dispose && rec.dispose.call(rec.value);\r\n                if (rec.async) return Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\r\n            }\r\n            catch (e) {\r\n                fail(e);\r\n            }\r\n        }\r\n        if (env.hasError) throw env.error;\r\n    }\r\n    return next();\r\n}\r\n\r\nexport default {\r\n    __extends: __extends,\r\n    __assign: __assign,\r\n    __rest: __rest,\r\n    __decorate: __decorate,\r\n    __param: __param,\r\n    __metadata: __metadata,\r\n    __awaiter: __awaiter,\r\n    __generator: __generator,\r\n    __createBinding: __createBinding,\r\n    __exportStar: __exportStar,\r\n    __values: __values,\r\n    __read: __read,\r\n    __spread: __spread,\r\n    __spreadArrays: __spreadArrays,\r\n    __spreadArray: __spreadArray,\r\n    __await: __await,\r\n    __asyncGenerator: __asyncGenerator,\r\n    __asyncDelegator: __asyncDelegator,\r\n    __asyncValues: __asyncValues,\r\n    __makeTemplateObject: __makeTemplateObject,\r\n    __importStar: __importStar,\r\n    __importDefault: __importDefault,\r\n    __classPrivateFieldGet: __classPrivateFieldGet,\r\n    __classPrivateFieldSet: __classPrivateFieldSet,\r\n    __classPrivateFieldIn: __classPrivateFieldIn,\r\n    __addDisposableResource: __addDisposableResource,\r\n    __disposeResources: __disposeResources,\r\n};\r\n","export class InvalidTokenError extends Error {\n}\nInvalidTokenError.prototype.name = \"InvalidTokenError\";\nfunction b64DecodeUnicode(str) {\n    return decodeURIComponent(atob(str).replace(/(.)/g, (m, p) => {\n        let code = p.charCodeAt(0).toString(16).toUpperCase();\n        if (code.length < 2) {\n            code = \"0\" + code;\n        }\n        return \"%\" + code;\n    }));\n}\nfunction base64UrlDecode(str) {\n    let output = str.replace(/-/g, \"+\").replace(/_/g, \"/\");\n    switch (output.length % 4) {\n        case 0:\n            break;\n        case 2:\n            output += \"==\";\n            break;\n        case 3:\n            output += \"=\";\n            break;\n        default:\n            throw new Error(\"base64 string is not of the correct length\");\n    }\n    try {\n        return b64DecodeUnicode(output);\n    }\n    catch (err) {\n        return atob(output);\n    }\n}\nexport function jwtDecode(token, options) {\n    if (typeof token !== \"string\") {\n        throw new InvalidTokenError(\"Invalid token specified: must be a string\");\n    }\n    options || (options = {});\n    const pos = options.header === true ? 0 : 1;\n    const part = token.split(\".\")[pos];\n    if (typeof part !== \"string\") {\n        throw new InvalidTokenError(`Invalid token specified: missing part #${pos + 1}`);\n    }\n    let decoded;\n    try {\n        decoded = base64UrlDecode(part);\n    }\n    catch (e) {\n        throw new InvalidTokenError(`Invalid token specified: invalid base64 for part #${pos + 1} (${e.message})`);\n    }\n    try {\n        return JSON.parse(decoded);\n    }\n    catch (e) {\n        throw new InvalidTokenError(`Invalid token specified: invalid json for part #${pos + 1} (${e.message})`);\n    }\n}\n","import{jwtDecode as e}from\"jwt-decode\";var t={exchange:\"/v1/auth/accesskey/exchange\"},n={verify:\"/v1/auth/otp/verify\",signIn:\"/v1/auth/otp/signin\",signUp:\"/v1/auth/otp/signup\",update:{email:\"/v1/auth/otp/update/email\",phone:\"/v1/auth/otp/update/phone\"},signUpOrIn:\"/v1/auth/otp/signup-in\"},s={verify:\"/v1/auth/magiclink/verify\",signIn:\"/v1/auth/magiclink/signin\",signUp:\"/v1/auth/magiclink/signup\",update:{email:\"/v1/auth/magiclink/update/email\",phone:\"/v1/auth/magiclink/update/phone\"},signUpOrIn:\"/v1/auth/magiclink/signup-in\"},o={verify:\"/v1/auth/enchantedlink/verify\",signIn:\"/v1/auth/enchantedlink/signin\",signUp:\"/v1/auth/enchantedlink/signup\",session:\"/v1/auth/enchantedlink/pending-session\",update:{email:\"/v1/auth/enchantedlink/update/email\"},signUpOrIn:\"/v1/auth/enchantedlink/signup-in\"},i={start:\"/v1/auth/oauth/authorize\",exchange:\"/v1/auth/oauth/exchange\",startNative:\"v1/auth/oauth/native/start\",finishNative:\"v1/auth/oauth/native/finish\"},a={start:\"/v1/auth/saml/authorize\",exchange:\"/v1/auth/saml/exchange\"},r={verify:\"/v1/auth/totp/verify\",signUp:\"/v1/auth/totp/signup\",update:\"/v1/auth/totp/update\"},l={signIn:\"/v1/auth/notp/whatsapp/signin\",signUp:\"/v1/auth/notp/whatsapp/signup\",signUpOrIn:\"/v1/auth/notp/whatsapp/signup-in\",session:\"/v1/auth/notp/pending-session\"},p={signUp:{start:\"/v1/auth/webauthn/signup/start\",finish:\"/v1/auth/webauthn/signup/finish\"},signIn:{start:\"/v1/auth/webauthn/signin/start\",finish:\"/v1/auth/webauthn/signin/finish\"},signUpOrIn:{start:\"/v1/auth/webauthn/signup-in/start\"},update:{start:\"v1/auth/webauthn/update/start\",finish:\"/v1/auth/webauthn/update/finish\"}},d={signUp:\"/v1/auth/password/signup\",signIn:\"/v1/auth/password/signin\",sendReset:\"/v1/auth/password/reset\",update:\"/v1/auth/password/update\",replace:\"/v1/auth/password/replace\",policy:\"/v1/auth/password/policy\"},u=\"/v1/auth/refresh\",c=\"/v1/auth/tenant/select\",g=\"/v1/auth/logout\",h=\"/v1/auth/logoutall\",v=\"/v1/auth/me\",f=\"/v1/auth/me/tenants\",m=\"/v1/auth/me/history\",I={start:\"/v1/flow/start\",next:\"/v1/flow/next\"};const b=\"<region>\",y=`https://api.${b}descope.com`,k=1e3,O=6e5,j=\"dct\",w=()=>{const e={};return{headers(t){const n=\"function\"==typeof t.entries?Object.fromEntries(t.entries()):t;return e.Headers=JSON.stringify(n),this},body(t){return e.Body=t,this},url(t){return e.Url=t.toString(),this},method(t){return e.Method=t,this},title(t){return e.Title=t,this},status(t){return e.Status=t,this},build:()=>Object.keys(e).flatMap((t=>e[t]?[`${\"Title\"!==t?`${t}: `:\"\"}${e[t]}`]:[])).join(\"\\n\")}},U=(e,t)=>{const n=(e=>async(...t)=>{const n=await e(...t),s=await n.text();return n.text=()=>Promise.resolve(s),n.json=()=>Promise.resolve(JSON.parse(s)),n.clone=()=>n,n})(t||fetch);return n||null==e||e.warn(\"Fetch is not defined, you will not be able to send http requests, if you are running in a test, make sure fetch is defined globally\"),e?async(...t)=>{if(!n)throw Error(\"Cannot send http request, fetch is not defined, if you are running in a test, make sure fetch is defined globally\");e.log((e=>w().title(\"Request\").url(e[0]).method(e[1].method).headers(e[1].headers).body(e[1].body).build())(t));const s=await n(...t);return e[s.ok?\"log\":\"error\"](await(async e=>{const t=await e.text();return w().title(\"Response\").url(e.url.toString()).status(`${e.status} ${e.statusText}`).headers(e.headers).body(t).build()})(s)),s}:n};var P;!function(e){e.get=\"GET\",e.delete=\"DELETE\",e.post=\"POST\",e.put=\"PUT\",e.patch=\"PATCH\"}(P||(P={}));const R=({path:e,baseUrl:t,queryParams:n,projectId:s})=>{const o=s.slice(1,-27);t=t.replace(b,o?o+\".\":\"\");let i=e?`${t.replace(/\\/$/,\"\")}/${null==e?void 0:e.replace(/^\\//,\"\")}`:t;if(n){i=`${i}?`;const e=Object.keys(n);e.forEach(((t,s)=>{i=`${i}${t}=${n[t]}${s===e.length-1?\"\":\"&\"}`}))}return i},x=(...e)=>new Headers(e.reduce(((e,t)=>{const n=(e=>Array.isArray(e)?e:e instanceof Headers?Array.from(e.entries()):e?Object.entries(e):[])(t);return n.reduce(((t,[n,s])=>(e[n]=s,e)),e),e}),{})),q={\"Content-Type\":\"application/json\"},$=(e,t=\"\")=>{let n=e;return t&&(n=n+\":\"+t),{Authorization:`Bearer ${n}`}},T=e=>{try{e=JSON.parse(e)}catch(e){return!1}return\"object\"==typeof e&&null!==e},A=({baseUrl:e,projectId:t,baseConfig:n,logger:s,hooks:o,cookiePolicy:i,fetch:a})=>{const r=U(s,a),l=async s=>{var a;const l=(null==o?void 0:o.beforeRequest)?o.beforeRequest(s):s,{path:p,body:d,headers:u,queryParams:c,method:g,token:h}=l,v=(e=>void 0===e?void 0:JSON.stringify(e))(d),f={headers:x($(t,h),{\"x-descope-sdk-name\":\"core-js\",\"x-descope-sdk-version\":\"2.25.0\"},(null==n?void 0:n.baseHeaders)||{},T(v)?q:{},u),method:g,body:v};null!==i&&(f.credentials=i||\"include\");const m=await r(R({path:p,baseUrl:e,queryParams:c,projectId:t}),f);if((null==o?void 0:o.afterRequest)&&await o.afterRequest(s,null==m?void 0:m.clone()),null==o?void 0:o.transformResponse){const e=await m.json(),t=((null===(a=m.headers)||void 0===a?void 0:a.get(\"set-cookie\"))||\"\").split(\";\").reduce(((e,t)=>{const[n,s]=t.split(\"=\");return Object.assign(Object.assign({},e),{[n.trim()]:s})}),{}),n=Object.assign(Object.assign({},m),{json:()=>Promise.resolve(e),cookies:t});return n.clone=()=>n,o.transformResponse(n)}return m};return{get:(e,{headers:t,queryParams:n,token:s}={})=>l({path:e,headers:t,queryParams:n,body:void 0,method:P.get,token:s}),post:(e,t,{headers:n,queryParams:s,token:o}={})=>l({path:e,headers:n,queryParams:s,body:t,method:P.post,token:o}),patch:(e,t,{headers:n,queryParams:s,token:o}={})=>l({path:e,headers:n,queryParams:s,body:t,method:P.patch,token:o}),put:(e,t,{headers:n,queryParams:s,token:o}={})=>l({path:e,headers:n,queryParams:s,body:t,method:P.put,token:o}),delete:(e,{headers:t,queryParams:n,token:s}={})=>l({path:e,headers:t,queryParams:n,body:void 0,method:P.delete,token:s}),hooks:o,buildUrl:(n,s)=>R({projectId:t,baseUrl:e,path:n,queryParams:s})}};var E={TOO_MANY_REQUESTS:429};function S(e,t,n){var s;let o=M(e);if(t){if(!(null==o?void 0:o.tenants)&&(null==o?void 0:o[j])===t)return(null==o?void 0:o[n])||[];o=null===(s=null==o?void 0:o.tenants)||void 0===s?void 0:s[t]}const i=null==o?void 0:o[n];return Array.isArray(i)?i:[]}function M(t){if(\"string\"!=typeof t||!t)throw new Error(\"Invalid token provided\");return e(t)}function N(e){const{exp:t}=M(e);return(new Date).getTime()/1e3>t}function C(e){let t=M(e);const n=Object.keys(null==t?void 0:t.tenants);return Array.isArray(n)?n:[]}function H(e,t){return S(e,t,\"permissions\")}function J(e,t){return S(e,t,\"roles\")}const z=(...e)=>e.join(\"/\").replace(/\\/{2,}/g,\"/\");async function L(e,t){var n;const s=await e,o={code:s.status,ok:s.ok,response:s},i=await s.clone().json();return s.ok?o.data=t?t(i):i:(o.error=i,s.status===E.TOO_MANY_REQUESTS&&Object.assign(o.error,{retryAfter:Number.parseInt(null===(n=s.headers)||void 0===n?void 0:n.get(\"retry-after\"))||0})),o}const D=(e,t)=>(n=t)=>t=>!e(t)&&n.replace(\"{val}\",t),_=(e,t)=>(n=t)=>t=>{const s=e.filter((e=>e(t)));return!(s.length<e.length)&&(n?n.replace(\"{val}\",t):s.join(\" OR \"))},F=(...e)=>({validate:t=>(e.forEach((e=>{const n=e(t);if(n)throw new Error(n)})),!0)}),Z=e=>t=>e.test(t),B=Z(/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-]+)*$/),K=Z(/^\\+[1-9]{1}[0-9]{3,14}$/),Q=(e,t)=>n=>F(...t).validate(((e,t,n)=>{const s=(Array.isArray(t)?t.join(\".\"):String(t)).replace(/\\[\\\\?(\"|')?(\\w|d)+\\\\?(\"|')?\\]/g,((e,t,n)=>\".\"+n)).split(\".\"),o=s.length;let i=0,a=e===Object(e)?e:void 0;for(;null!=a&&i<o;)a=a[s[i++]];return i&&i===o&&void 0!==a?a:n})(n,e)),V=D(B,'\"{val}\" is not a valid email'),Y=D(K,'\"{val}\" is not a valid phone number'),G=D((W=1,e=>e.length>=W),\"Minimum length is 1\");var W;const X=D((e=>\"string\"==typeof e),\"Input is not a string\"),ee=D((e=>Array.isArray(e)),\"Input is not an array\"),te=D((e=>\"boolean\"==typeof e),\"Input is not a boolean\"),ne=D((e=>void 0===e),\"Input is defined\"),se=_([X(),ne()],\"Input is not a string or undefined\"),oe=_([ee(),te()],\"Input is not an array or boolean\"),ie=(...e)=>t=>(...n)=>(e.forEach(((e,t)=>F(...e).validate(n[t]))),t(...n)),ae=e=>[X(`\"${e}\" must be a string`)],re=e=>[X(`\"${e}\" must be a string`),G(`\"${e}\" must not be empty`)],le=e=>[X(`\"${e}\" must be a string`),V()],pe=e=>[X(`\"${e}\" must be a string`),Y()],de=ie(re(\"accessKey\")),ue=e=>({exchange:de(((n,s)=>L(e.post(t.exchange,{loginOptions:s},{token:n}))))}),ce=(e,t,n)=>(t.forEach((t=>{const s=t.split(\".\");let o=s.shift(),i=e;for(;s.length>0;){if(i=i[o],!o||!i)throw Error(`Invalid path \"${t}\", \"${o}\" is missing or has no value`);o=s.shift()}if(\"function\"!=typeof i[o])throw Error(`\"${t}\" is not a function`);const a=i[o];i[o]=n(a)})),e),ge=({pollingIntervalMs:e=1e3,timeoutMs:t=6e5}={})=>({pollingIntervalMs:Math.max(e||k,k),timeoutMs:Math.min(t||O,O)});var he,ve;!function(e){e.sms=\"sms\",e.voice=\"voice\",e.whatsapp=\"whatsapp\"}(he||(he={})),function(e){e.email=\"email\"}(ve||(ve={}));const fe=Object.assign(Object.assign({},he),ve);var me;!function(e){e.waiting=\"waiting\",e.running=\"running\",e.completed=\"completed\",e.failed=\"failed\"}(me||(me={}));const Ie=re(\"loginId\"),be=ie(re(\"token\")),ye=ie(Ie),ke=ie(re(\"pendingRef\")),Oe=ie(Ie,le(\"email\")),je=e=>({verify:be((t=>L(e.post(o.verify,{token:t})))),signIn:ye(((t,n,s,i)=>L(e.post(z(o.signIn,fe.email),{loginId:t,URI:n,loginOptions:s},{token:i})))),signUpOrIn:ye(((t,n,s)=>L(e.post(z(o.signUpOrIn,fe.email),{loginId:t,URI:n,loginOptions:s})))),signUp:ye(((t,n,s,i)=>L(e.post(z(o.signUp,fe.email),{loginId:t,URI:n,user:s,loginOptions:i})))),waitForSession:ke(((t,n)=>new Promise((s=>{const{pollingIntervalMs:i,timeoutMs:a}=ge(n);let r;const l=setInterval((async()=>{const n=await e.post(o.session,{pendingRef:t});n.ok&&(clearInterval(l),r&&clearTimeout(r),s(L(Promise.resolve(n))))}),i);r=setTimeout((()=>{s({error:{errorDescription:`Session polling timeout exceeded: ${a}ms`,errorCode:\"0\"},ok:!1}),clearInterval(l)}),a)})))),update:{email:Oe(((t,n,s,i,a)=>L(e.post(o.update.email,Object.assign({loginId:t,email:n,URI:s},a),{token:i}))))}}),we=ie(re(\"flowId\")),Ue=ie(re(\"executionId\"),re(\"stepId\"),re(\"interactionId\")),Pe=e=>({start:we(((t,n,s,o,i,a,r)=>L(e.post(I.start,{flowId:t,options:n,conditionInteractionId:s,interactionId:o,version:i,componentsVersion:a,input:r})))),next:Ue(((t,n,s,o,i,a)=>L(e.post(I.next,{executionId:t,stepId:n,interactionId:s,version:o,componentsVersion:i,input:a}))))}),Re=re(\"loginId\"),xe=ie(re(\"token\")),qe=ie(Re),$e=ie(Re,pe(\"phone\")),Te=ie(Re,le(\"email\")),Ae=Object.keys(fe).filter((e=>e!==he.voice)),Ee=e=>({verify:xe((t=>L(e.post(s.verify,{token:t})))),signIn:Ae.reduce(((t,n)=>Object.assign(Object.assign({},t),{[n]:qe(((t,o,i,a)=>L(e.post(z(s.signIn,n),{loginId:t,URI:o,loginOptions:i},{token:a}))))})),{}),signUp:Ae.reduce(((t,n)=>Object.assign(Object.assign({},t),{[n]:qe(((t,o,i,a)=>L(e.post(z(s.signUp,n),{loginId:t,URI:o,user:i,loginOptions:a}))))})),{}),signUpOrIn:Ae.reduce(((t,n)=>Object.assign(Object.assign({},t),{[n]:qe(((t,o,i)=>L(e.post(z(s.signUpOrIn,n),{loginId:t,URI:o,loginOptions:i}))))})),{}),update:{email:Te(((t,n,o,i,a)=>L(e.post(s.update.email,Object.assign({loginId:t,email:n,URI:o},a),{token:i})))),phone:Object.keys(he).filter((e=>e!==he.voice)).reduce(((t,n)=>Object.assign(Object.assign({},t),{[n]:$e(((t,o,i,a,r)=>L(e.post(z(s.update.phone,n),Object.assign({loginId:t,phone:o,URI:i},r),{token:a}))))})),{})}});var Se;!function(e){e.facebook=\"facebook\",e.github=\"github\",e.google=\"google\",e.microsoft=\"microsoft\",e.gitlab=\"gitlab\",e.apple=\"apple\",e.discord=\"discord\",e.linkedin=\"linkedin\",e.slack=\"slack\"}(Se||(Se={}));const Me=ie(re(\"code\")),Ne=e=>({start:Object.assign(((t,n,s,o)=>L(e.post(i.start,s||{},{queryParams:Object.assign({provider:t},n&&{redirectURL:n}),token:o}))),Object.keys(Se).reduce(((t,n)=>Object.assign(Object.assign({},t),{[n]:(t,s,o)=>L(e.post(i.start,s||{},{queryParams:Object.assign({provider:n},t&&{redirectURL:t}),token:o}))})),{})),exchange:Me((t=>L(e.post(i.exchange,{code:t})))),startNative:(t,n,s)=>L(e.post(i.startNative,{provider:t,loginOptions:n,implicit:s})),finishNative:(t,n,s,o,a)=>L(e.post(i.finishNative,{provider:t,stateId:n,user:s,code:o,idToken:a}))}),Ce=re(\"loginId\"),He=ie(Ce,re(\"code\")),Je=ie(Ce),ze=ie(Ce,pe(\"phone\")),Le=ie(Ce,le(\"email\")),De=e=>({verify:Object.keys(fe).reduce(((t,s)=>Object.assign(Object.assign({},t),{[s]:He(((t,o)=>L(e.post(z(n.verify,s),{code:o,loginId:t}))))})),{}),signIn:Object.keys(fe).reduce(((t,s)=>Object.assign(Object.assign({},t),{[s]:Je(((t,o,i)=>L(e.post(z(n.signIn,s),{loginId:t,loginOptions:o},{token:i}))))})),{}),signUp:Object.keys(fe).reduce(((t,s)=>Object.assign(Object.assign({},t),{[s]:Je(((t,o,i)=>L(e.post(z(n.signUp,s),{loginId:t,user:o,loginOptions:i}))))})),{}),signUpOrIn:Object.keys(fe).reduce(((t,s)=>Object.assign(Object.assign({},t),{[s]:Je(((t,o)=>L(e.post(z(n.signUpOrIn,s),{loginId:t,loginOptions:o}))))})),{}),update:{email:Le(((t,s,o,i)=>L(e.post(n.update.email,Object.assign({loginId:t,email:s},i),{token:o})))),phone:Object.keys(he).reduce(((t,s)=>Object.assign(Object.assign({},t),{[s]:ze(((t,o,i,a)=>L(e.post(z(n.update.phone,s),Object.assign({loginId:t,phone:o},a),{token:i}))))})),{})}}),_e=ie(re(\"tenant\")),Fe=ie(re(\"code\")),Ze=e=>({start:_e(((t,n,s,o)=>L(e.post(a.start,s||{},{queryParams:{tenant:t,redirectURL:n},token:o})))),exchange:Fe((t=>L(e.post(a.exchange,{code:t}))))}),Be=re(\"loginId\"),Ke=ie(Be,re(\"code\")),Qe=ie(Be),Ve=ie(Be),Ye=e=>({signUp:Qe(((t,n)=>L(e.post(r.signUp,{loginId:t,user:n})))),verify:Ke(((t,n,s,o)=>L(e.post(r.verify,{loginId:t,code:n,loginOptions:s},{token:o})))),update:Ve(((t,n)=>L(e.post(r.update,{loginId:t},{token:n}))))}),Ge=re(\"loginId\"),We=re(\"newPassword\"),Xe=ie(Ge,re(\"password\")),et=ie(Ge),tt=ie(Ge,We),nt=ie(Ge,re(\"oldPassword\"),We),st=e=>({signUp:Xe(((t,n,s,o)=>L(e.post(d.signUp,{loginId:t,password:n,user:s,loginOptions:o})))),signIn:Xe(((t,n,s)=>L(e.post(d.signIn,{loginId:t,password:n,loginOptions:s})))),sendReset:et(((t,n,s)=>L(e.post(d.sendReset,{loginId:t,redirectUrl:n,templateOptions:s})))),update:tt(((t,n,s)=>L(e.post(d.update,{loginId:t,newPassword:n},{token:s})))),replace:nt(((t,n,s)=>L(e.post(d.replace,{loginId:t,oldPassword:n,newPassword:s})))),policy:()=>L(e.get(d.policy))}),ot=ae(\"loginId\"),it=re(\"loginId\"),at=re(\"origin\"),rt=ie(it,at,re(\"name\")),lt=ie(it,at),pt=ie(ot,at),dt=ie(it,at,re(\"token\")),ut=ie(re(\"transactionId\"),re(\"response\")),ct=e=>({signUp:{start:rt(((t,n,s)=>L(e.post(p.signUp.start,{user:{loginId:t,name:s},origin:n})))),finish:ut(((t,n)=>L(e.post(p.signUp.finish,{transactionId:t,response:n}))))},signIn:{start:pt(((t,n,s,o)=>L(e.post(p.signIn.start,{loginId:t,origin:n,loginOptions:s},{token:o})))),finish:ut(((t,n)=>L(e.post(p.signIn.finish,{transactionId:t,response:n}))))},signUpOrIn:{start:lt(((t,n)=>L(e.post(p.signUpOrIn.start,{loginId:t,origin:n}))))},update:{start:dt(((t,n,s)=>L(e.post(p.update.start,{loginId:t,origin:n},{token:s})))),finish:ut(((t,n)=>L(e.post(p.update.finish,{transactionId:t,response:n}))))}}),gt=ae(\"loginId\"),ht=ie(gt),vt=ie(re(\"pendingRef\")),ft=e=>({signUpOrIn:ht(((t,n)=>L(e.post(l.signUpOrIn,{loginId:t,loginOptions:n})))),signUp:ht(((t,n,s)=>L(e.post(l.signUp,{loginId:t,user:n,loginOptions:s})))),signIn:ht(((t,n,s)=>L(e.post(l.signIn,{loginId:t,loginOptions:n},{token:s})))),waitForSession:vt(((t,n)=>new Promise((s=>{const{pollingIntervalMs:o,timeoutMs:i}=ge(n);let a;const r=setInterval((async()=>{const n=await e.post(l.session,{pendingRef:t});n.ok&&(clearInterval(r),a&&clearTimeout(a),s(L(Promise.resolve(n))))}),o);a=setTimeout((()=>{s({error:{errorDescription:`Session polling timeout exceeded: ${i}ms`,errorCode:\"0\"},ok:!1}),clearInterval(r)}),i)}))))}),mt=ie(re(\"token\")),It=ie([se(`\"${\"token\"}\" must be string or undefined`)]);var bt,yt;var kt=ie([(bt=\"projectId\",yt=re(\"projectId\"),D(Q(bt,yt))())])((e=>t=>{var n;return e(Object.assign(Object.assign({},t),{hooks:{beforeRequest:e=>{var n;const s=[].concat((null===(n=t.hooks)||void 0===n?void 0:n.beforeRequest)||[]);return null==s?void 0:s.reduce(((e,t)=>t(e)),e)},afterRequest:async(e,n)=>{var s;const o=[].concat((null===(s=t.hooks)||void 0===s?void 0:s.afterRequest)||[]);if(0==o.length)return;(await Promise.allSettled(null==o?void 0:o.map((t=>t(e,null==n?void 0:n.clone()))))).forEach((e=>{var n;return\"rejected\"===e.status&&(null===(n=t.logger)||void 0===n?void 0:n.error(e.reason))}))},transformResponse:null===(n=t.hooks)||void 0===n?void 0:n.transformResponse}}))})((({projectId:e,logger:t,baseUrl:n,hooks:s,cookiePolicy:o,baseHeaders:i={},fetch:a})=>{return r=A({baseUrl:n||y,projectId:e,logger:t,hooks:s,cookiePolicy:o,baseConfig:{baseHeaders:i},fetch:a}),{accessKey:ue(r),otp:De(r),magicLink:Ee(r),enchantedLink:je(r),oauth:Ne(r),saml:Ze(r),totp:Ye(r),notp:ft(r),webauthn:ct(r),password:st(r),flow:Pe(r),refresh:It(((e,t)=>L(r.post(u,{},{token:e,queryParams:t})))),selectTenant:ie([X(\"tenantId\")],[se('\"token\" must be string or undefined')])(((e,t)=>L(r.post(c,{tenant:e},{token:t})))),logout:It((e=>L(r.post(g,{},{token:e})))),logoutAll:It((e=>L(r.post(h,{},{token:e})))),me:It((e=>L(r.get(v,{token:e})))),myTenants:ie([oe('\"tenants\" must a string array or a boolean')],[se('\"token\" must be string or undefined')])(((e,t)=>{const n={};return\"boolean\"==typeof e?n.dct=e:n.ids=e,L(r.post(f,n,{token:t}))})),history:It((e=>L(r.get(m,{token:e})))),isJwtExpired:mt(N),getTenants:mt(C),getJwtPermissions:mt(H),getJwtRoles:mt(J),httpClient:r};var r}))),Ot=Object.assign(kt,{DeliveryMethods:fe});export{E as HttpStatusCodes,Ot as default,ge as normalizeWaitForSessionConfig,L as transformResponse,ce as wrapWith};\n//# sourceMappingURL=index.esm.js.map\n","import { jwtDecode, JwtPayload } from 'jwt-decode';\n\n/**\n * Get the JWT expiration WITHOUT VALIDATING the JWT\n * @param token The JWT to extract expiration from\n * @returns The Date for when the JWT expires or null if there is an issue\n */\nexport const getTokenExpiration = (token: string) => {\n  try {\n    const claims = jwtDecode<JwtPayload>(token);\n    if (claims.exp) {\n      return new Date(claims.exp * 1000);\n    }\n  } catch (e) {\n    return null;\n  }\n};\n\nexport const millisecondsUntilDate = (date: Date) =>\n  date ? date.getTime() - new Date().getTime() : 0;\n\nexport const createTimerFunctions = () => {\n  const timerIds: NodeJS.Timeout[] = [];\n\n  const clearAllTimers = () => {\n    while (timerIds.length) {\n      clearTimeout(timerIds.pop());\n    }\n  };\n\n  const setTimer = (cb: () => void, timeout: number) => {\n    timerIds.push(setTimeout(cb, timeout));\n  };\n\n  return { clearAllTimers, setTimer };\n};\n","const logger = {\n  debug: (...args: any[]) => {\n    // eslint-disable-next-line no-console\n    console.debug(...args);\n  },\n};\n\nexport default logger;\n","// This sdk can be used in SSR apps\nexport const IS_BROWSER = typeof window !== 'undefined';\n\n// Maximum timeout value for setTimeout\n// For more information, refer to https://developer.mozilla.org/en-US/docs/Web/API/setTimeout#maximum_delay_value\nexport const MAX_TIMEOUT = Math.pow(2, 31) - 1;\n","/*! js-cookie v3.0.5 | MIT */\n/* eslint-disable no-var */\nfunction assign (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n    for (var key in source) {\n      target[key] = source[key];\n    }\n  }\n  return target\n}\n/* eslint-enable no-var */\n\n/* eslint-disable no-var */\nvar defaultConverter = {\n  read: function (value) {\n    if (value[0] === '\"') {\n      value = value.slice(1, -1);\n    }\n    return value.replace(/(%[\\dA-F]{2})+/gi, decodeURIComponent)\n  },\n  write: function (value) {\n    return encodeURIComponent(value).replace(\n      /%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,\n      decodeURIComponent\n    )\n  }\n};\n/* eslint-enable no-var */\n\n/* eslint-disable no-var */\n\nfunction init (converter, defaultAttributes) {\n  function set (name, value, attributes) {\n    if (typeof document === 'undefined') {\n      return\n    }\n\n    attributes = assign({}, defaultAttributes, attributes);\n\n    if (typeof attributes.expires === 'number') {\n      attributes.expires = new Date(Date.now() + attributes.expires * 864e5);\n    }\n    if (attributes.expires) {\n      attributes.expires = attributes.expires.toUTCString();\n    }\n\n    name = encodeURIComponent(name)\n      .replace(/%(2[346B]|5E|60|7C)/g, decodeURIComponent)\n      .replace(/[()]/g, escape);\n\n    var stringifiedAttributes = '';\n    for (var attributeName in attributes) {\n      if (!attributes[attributeName]) {\n        continue\n      }\n\n      stringifiedAttributes += '; ' + attributeName;\n\n      if (attributes[attributeName] === true) {\n        continue\n      }\n\n      // Considers RFC 6265 section 5.2:\n      // ...\n      // 3.  If the remaining unparsed-attributes contains a %x3B (\";\")\n      //     character:\n      // Consume the characters of the unparsed-attributes up to,\n      // not including, the first %x3B (\";\") character.\n      // ...\n      stringifiedAttributes += '=' + attributes[attributeName].split(';')[0];\n    }\n\n    return (document.cookie =\n      name + '=' + converter.write(value, name) + stringifiedAttributes)\n  }\n\n  function get (name) {\n    if (typeof document === 'undefined' || (arguments.length && !name)) {\n      return\n    }\n\n    // To prevent the for loop in the first place assign an empty array\n    // in case there are no cookies at all.\n    var cookies = document.cookie ? document.cookie.split('; ') : [];\n    var jar = {};\n    for (var i = 0; i < cookies.length; i++) {\n      var parts = cookies[i].split('=');\n      var value = parts.slice(1).join('=');\n\n      try {\n        var found = decodeURIComponent(parts[0]);\n        jar[found] = converter.read(value, found);\n\n        if (name === found) {\n          break\n        }\n      } catch (e) {}\n    }\n\n    return name ? jar[name] : jar\n  }\n\n  return Object.create(\n    {\n      set,\n      get,\n      remove: function (name, attributes) {\n        set(\n          name,\n          '',\n          assign({}, attributes, {\n            expires: -1\n          })\n        );\n      },\n      withAttributes: function (attributes) {\n        return init(this.converter, assign({}, this.attributes, attributes))\n      },\n      withConverter: function (converter) {\n        return init(assign({}, this.converter, converter), this.attributes)\n      }\n    },\n    {\n      attributes: { value: Object.freeze(defaultAttributes) },\n      converter: { value: Object.freeze(converter) }\n    }\n  )\n}\n\nvar api = init(defaultConverter, { path: '/' });\n/* eslint-enable no-var */\n\nexport { api as default };\n","/** Default name for the session cookie name / local storage key */\nexport const SESSION_TOKEN_KEY = 'DS';\n/** Default name for the refresh local storage key */\nexport const REFRESH_TOKEN_KEY = 'DSR';\n","import { JWTResponse } from '@descope/core-js-sdk';\nimport Cookies from 'js-cookie';\nimport { BeforeRequestHook } from '../../types';\nimport { REFRESH_TOKEN_KEY, SESSION_TOKEN_KEY } from './constants';\nimport {\n  getLocalStorage,\n  removeLocalStorage,\n  setLocalStorage,\n} from '../helpers';\n\n/**\n * Store the session JWT as a cookie on the given domain and path with the given expiration.\n * This is useful so that the application backend will automatically get the cookie for the session\n * @param name cookie name\n * @param value The JWT to store as a cookie\n * @param cookieParams configuration that is usually returned from the JWT\n */\nfunction setJwtTokenCookie(\n  name: string,\n  value: string,\n  { cookiePath, cookieDomain, cookieExpiration }: Partial<JWTResponse>,\n) {\n  if (value) {\n    const expires = new Date(cookieExpiration * 1000); // we are getting response from the server in seconds instead of ms\n    // Since its a JS cookie, we don't set the domain because we want the cookie to be on the same domain as the application\n    const domainMatches = isCurrentDomainOrParentDomain(cookieDomain);\n    Cookies.set(name, value, {\n      path: cookiePath,\n      domain: domainMatches ? cookieDomain : undefined,\n      expires,\n      sameSite: 'Strict',\n      secure: true,\n    });\n  }\n}\n\n/*\n * Check if the cookie domain is the same as the current domain or the parent domain\n * Examples:\n * 1. cookie domain: 'example.com', current domain: 'example.com' => true\n * 2. cookie domain: 'example.com', current domain: 'sub.example.com' => true\n * 3. cookie domain: 'example.com', current domain: 'sub.sub.example.com' => true\n * 4. cookie domain: 'example.com', current domain: 'another.com' => false\n * 5. cookie domain: 'example.com', current domain: 'example.co.il' => false\n */\nfunction isCurrentDomainOrParentDomain(cookieDomain: string): boolean {\n  const currentDomain = window.location.hostname;\n  const currentDomainParts = currentDomain.split('.');\n  const cookieDomainParts = cookieDomain.split('.');\n\n  // check if the cookie domain items are the last items in the current domain\n  const currentDomainSuffix = currentDomainParts\n    .slice(-cookieDomainParts.length)\n    .join('.');\n  return currentDomainSuffix === cookieDomain;\n}\n\nexport const persistTokens = (\n  { refreshJwt, sessionJwt, ...cookieParams } = {} as Partial<JWTResponse>,\n  sessionTokenViaCookie = false,\n  storagePrefix = '',\n) => {\n  // persist refresh token\n  refreshJwt &&\n    setLocalStorage(`${storagePrefix}${REFRESH_TOKEN_KEY}`, refreshJwt);\n\n  // persist session token\n  if (sessionJwt) {\n    sessionTokenViaCookie\n      ? setJwtTokenCookie(SESSION_TOKEN_KEY, sessionJwt, cookieParams)\n      : setLocalStorage(`${storagePrefix}${SESSION_TOKEN_KEY}`, sessionJwt);\n  }\n};\n\n/** Return the refresh token from the localStorage. Not for production usage because refresh token will not be saved in localStorage. */\nexport function getRefreshToken(prefix: string = '') {\n  return getLocalStorage(`${prefix}${REFRESH_TOKEN_KEY}`) || '';\n}\n\n/**\n * Return the session token. first try to get from cookie, and fallback to local storage\n * See sessionTokenViaCookie option for more details about session token location\n */\nexport function getSessionToken(prefix: string = ''): string {\n  return (\n    Cookies.get(SESSION_TOKEN_KEY) ||\n    getLocalStorage(`${prefix}${SESSION_TOKEN_KEY}`) ||\n    ''\n  );\n}\n\n/** Remove both the localStorage refresh JWT and the session cookie */\nexport function clearTokens(prefix: string = '') {\n  removeLocalStorage(`${prefix}${REFRESH_TOKEN_KEY}`);\n  removeLocalStorage(`${prefix}${SESSION_TOKEN_KEY}`);\n  Cookies.remove(SESSION_TOKEN_KEY);\n}\n\nexport const beforeRequest =\n  (prefix?: string): BeforeRequestHook =>\n  (config) =>\n    Object.assign(config, { token: config.token || getRefreshToken(prefix) });\n","import { IS_BROWSER } from '../../constants';\n\nconst FINGERPRINT_PUBLIC_KEY = 'fingerprint.public.key';\nconst FINGERPRINT_ENDPOINT_URL = 'fingerprint.endpoint.url';\n\n/** Fingerprint.js cloudflare integration */\nexport const FP_EP_URL =\n  (IS_BROWSER && localStorage?.getItem(FINGERPRINT_ENDPOINT_URL)) ||\n  'https://api.descope.com';\nexport const FP_CF_ENDPOINT_PATH = '/fXj8gt3x8VulJBna/x96Emn69oZwcd7I6';\nexport const FP_CF_SCRIPT_PATH = '/fXj8gt3x8VulJBna/w78aRZnnDZ3Aqw0I';\n/** Fingerprint visitor data */\nexport const FP_BODY_DATA = 'fpData';\n/** Session ID for visitor */\nexport const VISITOR_SESSION_ID_PARAM = 'vsid';\n/** Request ID for visitor */\nexport const VISITOR_REQUEST_ID_PARAM = 'vrid';\n/** FP storage key */\nexport const FP_STORAGE_KEY = 'fp';\n// Storage FP Keys TTL is 24 hours\nexport const STORAGE_TTL_MS = 24 * 60 * 60 * 1000;\n","/**\n * FingerprintJS Pro v3.9.9 - Copyright (c) FingerprintJS, Inc, 2024 (https://fingerprint.com)\n */\n\nimport{__spreadArray as e,__rest as t,__assign as n}from\"tslib\";function r(e,t){return function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(e,t)?e[t]:void 0}function o(e,t,n,r){var o,i=document,a=\"securitypolicyviolation\",u=function(t){var n=new URL(e,location.href),r=t.blockedURI;r!==n.href&&r!==n.protocol.slice(0,-1)&&r!==n.origin||(o=t,R())};i.addEventListener(a,u);var R=function(){return i.removeEventListener(a,u)};return null==r||r.then(R,R),Promise.resolve().then(t).then((function(e){return R(),e}),(function(e){return new Promise((function(e){var t=new MessageChannel;t.port1.onmessage=function(){return e()},t.port2.postMessage(null)})).then((function(){if(R(),o)return n(o);throw e}))}))}var i={default:\"endpoint\"},a={default:\"tlsEndpoint\"};function u(e){for(var t=\"\",n=0;n<e.length;++n)if(n>0){var r=e[n].toLowerCase();r!==e[n]?t+=\" \".concat(r):t+=e[n]}else t+=e[n].toUpperCase();return t}var R=\"Client timeout\",c=\"Network connection error\",s=\"Network request aborted\",f=\"Response cannot be parsed\",l=\"Blocked by CSP\",E=\"The endpoint parameter is not a valid URL\",d=/*#__PURE__*/u(\"WrongRegion\"),p=/*#__PURE__*/u(\"SubscriptionNotActive\"),v=/*#__PURE__*/u(\"UnsupportedVersion\"),_=/*#__PURE__*/u(\"InstallationMethodRestricted\"),O=/*#__PURE__*/u(\"HostnameRestricted\"),h=/*#__PURE__*/u(\"IntegrationFailed\"),I=\"API key required\",N=\"API key not found\",T=\"API key expired\",m=\"Request cannot be parsed\",w=\"Request failed\",A=\"Request failed to process\",P=\"Too many requests, rate limit exceeded\",y=\"Not available for this origin\",D=\"Not available with restricted header\",S=I,g=N,L=T,U=\"3.9.9\",b=\"Failed to load the JS script of the agent\",C=\"9319\";function M(t,n){var r,o,i,a,u,R,c=[],s=(r=function(t){var n=e([],t,!0);return{current:function(){return n[0]},postpone:function(){var e=n.shift();void 0!==e&&n.push(e)},exclude:function(){n.shift()}}}(t),a=100,u=3e3,R=0,o=function(){return Math.random()*Math.min(u,a*Math.pow(2,R++))},i=new Set,[r.current(),function(e,t){var n,a=t instanceof Error?t.message:\"\";if(a===l||a===E)r.exclude(),n=0;else if(a===C)r.exclude();else if(a===b){var u=Date.now()-e.getTime()<50,R=r.current();R&&u&&!i.has(R)&&(i.add(R),n=0),r.postpone()}else r.postpone();var c=r.current();return void 0===c?void 0:[c,null!=n?n:e.getTime()+o()-Date.now()]}]),f=s[0],d=s[1];if(void 0===f)return Promise.reject(new TypeError(\"The list of script URL patterns is empty\"));var p=function(e){var t=new Date,r=function(n){return c.push({url:e,startedAt:t,finishedAt:new Date,error:n})},o=n(e);return o.then((function(){return r()}),r),o.catch((function(e){if(c.length>=5)throw e;var n=d(t,e);if(!n)throw e;var r,o=n[0],i=n[1];return(r=i,new Promise((function(e){return setTimeout(e,r)}))).then((function(){return p(o)}))}))};return p(f).then((function(e){return[e,c]}))}var K=\"https://fpnpmcdn.net/v<version>/<apiKey>/loader_v<loaderVersion>.js\",B=K;function F(e){var o;e.scriptUrlPattern;var i=e.token,a=e.apiKey,u=void 0===a?i:a,R=t(e,[\"scriptUrlPattern\",\"token\",\"apiKey\"]),c=null!==(o=r(e,\"scriptUrlPattern\"))&&void 0!==o?o:K,s=function(){var e=[],t=function(){e.push({time:new Date,state:document.visibilityState})},n=function(e,t,n,r){return e.addEventListener(t,n,r),function(){return e.removeEventListener(t,n,r)}}(document,\"visibilitychange\",t);return t(),[e,n]}(),f=s[0],l=s[1];return Promise.resolve().then((function(){if(!u||\"string\"!=typeof u)throw new Error(I);var e=function(e,t){return(Array.isArray(e)?e:[e]).map((function(e){return function(e,t){var n=encodeURIComponent;return e.replace(/<[^<>]+>/g,(function(e){return\"<version>\"===e?\"3\":\"<apiKey>\"===e?n(t):\"<loaderVersion>\"===e?n(U):e}))}(String(e),t)}))}(c,u);return M(e,V)})).catch((function(e){throw l(),function(e){if(e instanceof Error&&e.message===C)return new Error(b);return e}(e)})).then((function(e){var t=e[0],r=e[1];return l(),t.load(n(n({},R),{ldi:{attempts:r,visibilityStates:f}}))}))}function V(e){return o(e,(function(){return function(e){return new Promise((function(t,n){if(function(e){if(URL.prototype)try{return new URL(e,location.href),!1}catch(t){if(t instanceof Error&&\"TypeError\"===t.name)return!0;throw t}}(e))throw new Error(E);var r=document.createElement(\"script\"),o=function(){var e;return null===(e=r.parentNode)||void 0===e?void 0:e.removeChild(r)},i=document.head||document.getElementsByTagName(\"head\")[0];r.onload=function(){o(),t()},r.onerror=function(){o(),n(new Error(b))},r.async=!0,r.src=e,i.appendChild(r)}))}(e)}),(function(){throw new Error(l)})).then(k)}function k(){var e=window,t=\"__fpjs_p_l_b\",n=e[t];if(function(e,t){var n,r=null===(n=Object.getOwnPropertyDescriptor)||void 0===n?void 0:n.call(Object,e,t);(null==r?void 0:r.configurable)?delete e[t]:r&&!r.writable||(e[t]=void 0)}(e,t),\"function\"!=typeof(null==n?void 0:n.load))throw new Error(C);return n}var G={load:F,defaultScriptUrlPattern:B,ERROR_SCRIPT_LOAD_FAIL:b,ERROR_API_KEY_EXPIRED:T,ERROR_API_KEY_INVALID:N,ERROR_API_KEY_MISSING:I,ERROR_BAD_REQUEST_FORMAT:m,ERROR_BAD_RESPONSE_FORMAT:f,ERROR_CLIENT_TIMEOUT:R,ERROR_CSP_BLOCK:l,ERROR_FORBIDDEN_ENDPOINT:O,ERROR_FORBIDDEN_HEADER:D,ERROR_FORBIDDEN_ORIGIN:y,ERROR_GENERAL_SERVER_FAILURE:w,ERROR_INSTALLATION_METHOD_RESTRICTED:_,ERROR_INTEGRATION_FAILURE:h,ERROR_INVALID_ENDPOINT:E,ERROR_NETWORK_ABORT:s,ERROR_NETWORK_CONNECTION:c,ERROR_RATE_LIMIT:P,ERROR_SERVER_TIMEOUT:A,ERROR_SUBSCRIPTION_NOT_ACTIVE:p,ERROR_TOKEN_EXPIRED:L,ERROR_TOKEN_INVALID:g,ERROR_TOKEN_MISSING:S,ERROR_UNSUPPORTED_VERSION:v,ERROR_WRONG_REGION:d,defaultEndpoint:i,defaultTlsEndpoint:a};export{T as ERROR_API_KEY_EXPIRED,N as ERROR_API_KEY_INVALID,I as ERROR_API_KEY_MISSING,m as ERROR_BAD_REQUEST_FORMAT,f as ERROR_BAD_RESPONSE_FORMAT,R as ERROR_CLIENT_TIMEOUT,l as ERROR_CSP_BLOCK,O as ERROR_FORBIDDEN_ENDPOINT,D as ERROR_FORBIDDEN_HEADER,y as ERROR_FORBIDDEN_ORIGIN,w as ERROR_GENERAL_SERVER_FAILURE,_ as ERROR_INSTALLATION_METHOD_RESTRICTED,h as ERROR_INTEGRATION_FAILURE,E as ERROR_INVALID_ENDPOINT,s as ERROR_NETWORK_ABORT,c as ERROR_NETWORK_CONNECTION,P as ERROR_RATE_LIMIT,b as ERROR_SCRIPT_LOAD_FAIL,A as ERROR_SERVER_TIMEOUT,p as ERROR_SUBSCRIPTION_NOT_ACTIVE,L as ERROR_TOKEN_EXPIRED,g as ERROR_TOKEN_INVALID,S as ERROR_TOKEN_MISSING,v as ERROR_UNSUPPORTED_VERSION,d as ERROR_WRONG_REGION,G as default,i as defaultEndpoint,B as defaultScriptUrlPattern,a as defaultTlsEndpoint,F as load};\n","import {\n  load,\n  defaultEndpoint,\n  defaultScriptUrlPattern,\n} from '@fingerprintjs/fingerprintjs-pro';\nimport {\n  FP_EP_URL,\n  FP_CF_ENDPOINT_PATH,\n  FP_CF_SCRIPT_PATH,\n  FP_STORAGE_KEY,\n  STORAGE_TTL_MS,\n  VISITOR_REQUEST_ID_PARAM,\n  VISITOR_SESSION_ID_PARAM,\n} from './constants';\nimport { FingerprintObject } from './types';\n\nconst createFingerprintObject = (\n  sessionId: string,\n  requestId: string,\n): FingerprintObject => ({\n  [VISITOR_SESSION_ID_PARAM]: sessionId,\n  [VISITOR_REQUEST_ID_PARAM]: requestId,\n});\n\n/** Generate UUID based on current time and some randomness */\nconst generateUUID = () => {\n  // return alphanumeric, sortable uuid of 27 characters\n  return (\n    Date.now().toString(36) +\n    Math.random().toString(36).substring(2) + // removing '0.' prefix\n    Math.random().toString(36).substring(2)\n  ).substring(0, 27);\n};\n\n// Set FP data to storage with expiration\n// We set the request id and session id together so they will have the same TTL\n// This implementation is based on https://www.sohamkamani.com/javascript/localstorage-with-ttl-expiry/\nconst setFPToStorage = (value: FingerprintObject) => {\n  const now = new Date();\n  // `item` is an object which contains the value\n  // as well as the time when it's supposed to expire\n  const item = {\n    value,\n    expiry: now.getTime() + STORAGE_TTL_MS,\n  };\n  localStorage.setItem(FP_STORAGE_KEY, JSON.stringify(item));\n};\n\n// Get Fingerprint from storage, will return null if not exists, or if expired\nconst getFPFromStorage = (returnExpired = false): FingerprintObject => {\n  const itemStr = localStorage.getItem(FP_STORAGE_KEY);\n  // if the item doesn't exist, return null\n  if (!itemStr) {\n    return null;\n  }\n  const item = JSON.parse(itemStr);\n  const now = new Date();\n  // compare the expiry time of the item with the current time\n  // return null if needed\n  if (now.getTime() > item.expiry && !returnExpired) {\n    return null;\n  }\n  return item.value;\n};\n\n/**\n * Ensure fingerprint ids (request id, session id) exist.\n * If not, It will generate and load them into to browser storage.\n * NOTE: Using fingerprintJS data has cost, use considerably.\n * @param fpKey FingerprintJS API key\n */\nexport const ensureFingerprintIds = async (\n  fpKey: string,\n  baseUrl = FP_EP_URL,\n) => {\n  try {\n    if (getFPFromStorage()) {\n      // FP is already in storage, no need to\n      return;\n    }\n\n    const sessionId = generateUUID();\n\n    const endpointUrl = new URL(baseUrl);\n    endpointUrl.pathname = FP_CF_ENDPOINT_PATH;\n\n    const patterUrl = new URL(baseUrl);\n    patterUrl.pathname = FP_CF_SCRIPT_PATH;\n    const scriptUrlPattern =\n      patterUrl.toString() +\n      '?apiKey=<apiKey>&version=<version>&loaderVersion=<loaderVersion>';\n\n    // load from FingerprintJS\n    const agentP = load({\n      apiKey: fpKey,\n      endpoint: [\n        endpointUrl.toString(),\n        defaultEndpoint, // Fallback to default endpoint in case of error\n      ],\n      scriptUrlPattern: [\n        scriptUrlPattern,\n        defaultScriptUrlPattern, // Fallback to default CDN in case of error\n      ],\n    });\n\n    const agent = await agentP;\n    const { requestId } = await agent.get({ linkedId: sessionId });\n    const fpData = createFingerprintObject(sessionId, requestId);\n    setFPToStorage(fpData);\n  } catch (ex) {\n    // eslint-disable-next-line no-console\n    console.warn('Could not load fingerprint', ex);\n  }\n};\n\n/**\n * Get Fingerprint data (request ids) from storage, or create empty object\n * If data is expired, return it anyway\n */\nexport const getFingerprintData = (): FingerprintObject | null => {\n  // get from storage if exists\n  return getFPFromStorage(true);\n};\n\n/** Clear Fingerprint data from storage */\nexport const clearFingerprintData = () => {\n  localStorage.removeItem(FP_STORAGE_KEY);\n};\n","import { IS_BROWSER } from '../../constants';\nimport { CreateWebSdk } from '../../sdk';\nimport { BeforeRequestHook } from '../../types';\nimport { addHooks } from '../helpers';\nimport { FP_BODY_DATA } from './constants';\nimport { ensureFingerprintIds, getFingerprintData } from './helpers';\nimport { FingerprintOptions } from './types';\n\nconst beforeRequest: BeforeRequestHook = (config) => {\n  const data = getFingerprintData();\n  if (data && config.body) {\n    config.body[FP_BODY_DATA] = data;\n  }\n\n  return config;\n};\n\n/**\n * Add fingerprint data to outgoing requests\n */\nexport const withFingerprint =\n  <T extends CreateWebSdk>(createSdk: T) =>\n  ({ fpKey, fpLoad, ...config }: Parameters<T>[0] & FingerprintOptions) => {\n    if (!IS_BROWSER) {\n      // Fingerprint is a client side only capability and will not work when running in the server (SSR)\n      return createSdk(config);\n    }\n\n    // load fingerprint now if needed\n    if (fpKey && fpLoad) {\n      ensureFingerprintIds(fpKey).catch(\n        // istanbul ignore next\n        () => null,\n      );\n    }\n\n    // Hook added always because fingerprint can be dynamic using flows\n    return createSdk(addHooks(config, { beforeRequest }));\n  };\n","/** Login Id of the last user logged in */\nexport const LOCAL_STORAGE_LAST_USER_LOGIN_ID = 'dls_last_user_login_id';\n\n/** Display name of the last user logged in */\nexport const LOCAL_STORAGE_LAST_USER_DISPLAY_NAME =\n  'dls_last_user_display_name';\n","import {\n  getLocalStorage,\n  removeLocalStorage,\n  setLocalStorage,\n} from '../helpers';\nimport {\n  LOCAL_STORAGE_LAST_USER_LOGIN_ID,\n  LOCAL_STORAGE_LAST_USER_DISPLAY_NAME,\n} from './constants';\n\nexport const setLastUserLoginId = (loginId: string) => {\n  return setLocalStorage(LOCAL_STORAGE_LAST_USER_LOGIN_ID, loginId);\n};\n\nexport const getLastUserLoginId = () => {\n  return getLocalStorage(LOCAL_STORAGE_LAST_USER_LOGIN_ID);\n};\n\nexport const removeLastUserLoginId = () => {\n  return removeLocalStorage(LOCAL_STORAGE_LAST_USER_LOGIN_ID);\n};\n\nexport const setLastUserDisplayName = (displayName: string) => {\n  return setLocalStorage(LOCAL_STORAGE_LAST_USER_DISPLAY_NAME, displayName);\n};\n\nexport const getLastUserDisplayName = () => {\n  return getLocalStorage(LOCAL_STORAGE_LAST_USER_DISPLAY_NAME);\n};\n\nexport const removeLastUserDisplayName = () => {\n  return removeLocalStorage(LOCAL_STORAGE_LAST_USER_DISPLAY_NAME);\n};\n","import { SdkFnWrapper, wrapWith } from '@descope/core-js-sdk';\nimport { CreateWebSdk } from '../../sdk';\nimport { AfterRequestHook, CoreSdk } from '../../types';\nimport { addHooks, getUserFromResponse } from '../helpers';\nimport {\n  getLastUserLoginId,\n  removeLastUserLoginId,\n  setLastUserLoginId,\n  getLastUserDisplayName,\n  removeLastUserDisplayName,\n  setLastUserDisplayName,\n} from './helpers';\nimport { LastLoggedInUserOptions } from './types';\n\n/**\n * Adds last logged in user to flow start request\n */\n// eslint-disable-next-line import/exports-last\nexport const withLastLoggedInUser =\n  <T extends CreateWebSdk>(createSdk: T) =>\n  ({\n    storeLastAuthenticatedUser = true,\n    keepLastAuthenticatedUserAfterLogout = false,\n    ...config\n  }: Parameters<T>[0] & LastLoggedInUserOptions): ReturnType<T> & {\n    getLastUserLoginId: typeof getLastUserLoginId;\n    getLastUserDisplayName: typeof getLastUserDisplayName;\n  } => {\n    if (!storeLastAuthenticatedUser) {\n      // We assign getLastUserLoginId and getLastUserDisplayName to the sdk\n      // To keep the return type consistent\n      return Object.assign(createSdk(config), {\n        getLastUserLoginId,\n        getLastUserDisplayName,\n      }) as any;\n    }\n    const afterRequest: AfterRequestHook = async (_req, res) => {\n      const userDetails = await getUserFromResponse(res);\n      const loginId = userDetails?.loginIds?.[0];\n      const displayName = userDetails?.name;\n      if (loginId) {\n        setLastUserLoginId(loginId);\n        setLastUserDisplayName(displayName);\n      }\n    };\n\n    const sdk = createSdk(addHooks(config, { afterRequest }));\n\n    let wrappedSdk = wrapWith(sdk, ['flow.start'], startWrapper);\n    wrappedSdk = wrapWith(\n      wrappedSdk,\n      ['logout', 'logoutAll'],\n      logoutWrapper(keepLastAuthenticatedUserAfterLogout),\n    );\n    return Object.assign(wrappedSdk, {\n      getLastUserLoginId,\n      getLastUserDisplayName,\n    }) as any;\n  };\n\nconst startWrapper: SdkFnWrapper<{}> =\n  (fn) =>\n  async (...args) => {\n    args[1] = args[1] || {};\n    const [, options = {}] = args as unknown as Parameters<\n      CoreSdk['flow']['start']\n    >;\n    const loginId = getLastUserLoginId();\n    const displayName = getLastUserDisplayName();\n\n    if (loginId) {\n      options.lastAuth ??= {};\n      options.lastAuth.loginId = loginId;\n      options.lastAuth.name = displayName;\n    }\n\n    const resp = await fn(...args);\n\n    return resp;\n  };\n\nconst logoutWrapper =\n  (keepOnLogout?: boolean): SdkFnWrapper<{}> =>\n  (fn) =>\n  async (...args) => {\n    const resp = await fn(...args);\n    if (keepOnLogout) {\n      return resp;\n    }\n\n    removeLastUserLoginId();\n    removeLastUserDisplayName();\n\n    return resp;\n  };\n","// create publisher/subscriber instances\nexport function createPubSub<T extends any>() {\n  const cbs = [];\n\n  const sub = (cb: (data: T) => void) => {\n    const idx = cbs.push(cb) - 1;\n    return () => cbs.splice(idx, 1);\n  };\n\n  const pub = (data: T) => {\n    cbs.forEach((cb) => cb(data));\n  };\n\n  return { pub, sub };\n}\n","import { SdkFnWrapper, UserResponse, wrapWith } from '@descope/core-js-sdk';\nimport { CreateWebSdk, WebSdk } from '../../sdk';\nimport { AfterRequestHook } from '../../types';\nimport {\n  addHooks,\n  getAuthInfoFromResponse,\n  getUserFromResponse,\n} from '../helpers';\nimport { createPubSub } from './helpers';\n\n/**\n * Adds 2 event functions to the sdk,\n * onSessionTokenChange: Gets a callback and call it whenever there is a change in session token\n * onUserChange: Gets a callback and call it whenever there is a change in current logged in user\n */\nexport const withNotifications =\n  <T extends CreateWebSdk>(createSdk: T) =>\n  (config: Parameters<T>[0]) => {\n    const sessionPS = createPubSub<string | null>();\n    const userPS = createPubSub<UserResponse | null>();\n\n    const afterRequest: AfterRequestHook = async (_req, res) => {\n      if (res?.status === 401) {\n        sessionPS.pub(null);\n        userPS.pub(null);\n      } else {\n        const userDetails = await getUserFromResponse(res);\n        if (userDetails) userPS.pub(userDetails);\n\n        const { sessionJwt } = await getAuthInfoFromResponse(res);\n        if (sessionJwt) sessionPS.pub(sessionJwt);\n      }\n    };\n\n    const sdk = createSdk(addHooks(config, { afterRequest }));\n\n    const wrapper: SdkFnWrapper<{}> =\n      (fn) =>\n      async (...args) => {\n        const resp = await fn(...args);\n\n        sessionPS.pub(null);\n        userPS.pub(null);\n\n        return resp;\n      };\n\n    const wrappedSdk = wrapWith(sdk, ['logout', 'logoutAll'], wrapper);\n\n    return Object.assign(wrappedSdk, {\n      onSessionTokenChange: sessionPS.sub,\n      onUserChange: userPS.sub,\n    });\n  };\n","/* eslint-disable import/exports-last */\nimport { SdkFnWrapper, wrapWith } from '@descope/core-js-sdk';\nimport { IS_BROWSER } from '../../constants';\nimport { CreateWebSdk } from '../../sdk';\nimport { AfterRequestHook } from '../../types';\nimport { addHooks, getAuthInfoFromResponse } from '../helpers';\nimport {\n  beforeRequest,\n  clearTokens,\n  getRefreshToken,\n  getSessionToken,\n  persistTokens,\n} from './helpers';\nimport { PersistTokensOptions } from './types';\n\n/**\n * Persist authentication tokens in cookie/storage\n */\nexport const withPersistTokens =\n  <T extends CreateWebSdk>(createSdk: T) =>\n  <A extends boolean>({\n    persistTokens: isPersistTokens,\n    sessionTokenViaCookie,\n    storagePrefix,\n    ...config\n  }: Parameters<T>[0] & PersistTokensOptions<A>): A extends true\n    ? ReturnType<T> & {\n        getRefreshToken: () => string;\n        getSessionToken: () => string;\n      }\n    : ReturnType<T> => {\n    if (!isPersistTokens || !IS_BROWSER) {\n      if (isPersistTokens) {\n        // Storing auth tokens in local storage and cookies are a client side only capabilities\n        // and will not be done when running in the server\n      }\n      return createSdk(config) as any;\n    }\n\n    const afterRequest: AfterRequestHook = async (req, res) => {\n      const isManagementApi = /^\\/v\\d+\\/mgmt\\//.test(req.path);\n\n      if (res?.status === 401) {\n        if (!isManagementApi) {\n          clearTokens(storagePrefix);\n        }\n      } else {\n        persistTokens(\n          await getAuthInfoFromResponse(res),\n          sessionTokenViaCookie,\n          storagePrefix,\n        );\n      }\n    };\n\n    const sdk = createSdk(\n      addHooks(config, {\n        beforeRequest: beforeRequest(storagePrefix),\n        afterRequest,\n      }),\n    );\n\n    const wrappedSdk = wrapWith(\n      sdk,\n      ['logout', 'logoutAll'],\n      wrapper(storagePrefix),\n    );\n\n    const refreshToken = () => getRefreshToken(storagePrefix);\n    const sessionToken = () => getSessionToken(storagePrefix);\n\n    return Object.assign(wrappedSdk, {\n      getRefreshToken: refreshToken,\n      getSessionToken: sessionToken,\n    }) as any;\n  };\n\nconst wrapper =\n  (prefix?: string): SdkFnWrapper<{}> =>\n  (fn) =>\n  async (...args) => {\n    const resp = await fn(...args);\n\n    clearTokens(prefix);\n\n    return resp;\n  };\n\nexport default withPersistTokens;\n","import { JWTResponse, SdkResponse, ResponseData } from '@descope/core-js-sdk';\nimport { IS_BROWSER } from '../constants';\nimport { CoreSdk } from '../types';\n\ntype CreateWebauthn = typeof createWebAuthn;\n\nconst withCoreFns =\n  <I extends Parameters<CreateWebauthn>, O extends ReturnType<CreateWebauthn>>(\n    creator: (...args: I) => O,\n  ) =>\n  (...args: I) => {\n    const obj = creator(...args);\n\n    Object.assign(obj.signUp, args[0].webauthn.signUp);\n    Object.assign(obj.signIn, args[0].webauthn.signIn);\n    Object.assign(obj.signUpOrIn, args[0].webauthn.signUpOrIn);\n    Object.assign(obj.update, args[0].webauthn.update);\n\n    return obj as {\n      [K in keyof O]: K extends keyof I[0]['webauthn']\n        ? O[K] & I[0]['webauthn'][K]\n        : O[K];\n    };\n  };\n\n/** Constructs a higher level WebAuthn API that wraps the functions from code-js-sdk */\nconst createWebAuthn = (sdk: CoreSdk) => ({\n  async signUp(identifier: string, name: string) {\n    const startResponse = await sdk.webauthn.signUp.start(\n      identifier,\n      window.location.origin,\n      name,\n    );\n    if (!startResponse.ok) {\n      return startResponse as unknown as SdkResponse<JWTResponse>;\n    }\n    const createResponse = await create(startResponse.data.options);\n    const finishResponse = await sdk.webauthn.signUp.finish(\n      startResponse.data.transactionId,\n      createResponse,\n    );\n    return finishResponse;\n  },\n\n  async signIn(identifier: string) {\n    const startResponse = await sdk.webauthn.signIn.start(\n      identifier,\n      window.location.origin,\n    );\n    if (!startResponse.ok) {\n      return startResponse as unknown as SdkResponse<JWTResponse>;\n    }\n    const getResponse = await get(startResponse.data.options);\n    const finishResponse = await sdk.webauthn.signIn.finish(\n      startResponse.data.transactionId,\n      getResponse,\n    );\n    return finishResponse;\n  },\n\n  async signUpOrIn(identifier: string) {\n    const startResponse = await sdk.webauthn.signUpOrIn.start(\n      identifier,\n      window.location.origin,\n    );\n    if (!startResponse.ok) {\n      return startResponse as unknown as SdkResponse<JWTResponse>;\n    }\n    if (startResponse.data?.create) {\n      const createResponse = await create(startResponse.data.options);\n      const finishResponse = await sdk.webauthn.signUp.finish(\n        startResponse.data.transactionId,\n        createResponse,\n      );\n      return finishResponse;\n    } else {\n      const getResponse = await get(startResponse.data.options);\n      const finishResponse = await sdk.webauthn.signIn.finish(\n        startResponse.data.transactionId,\n        getResponse,\n      );\n      return finishResponse;\n    }\n  },\n\n  async update(identifier: string, token: string) {\n    const startResponse = await sdk.webauthn.update.start(\n      identifier,\n      window.location.origin,\n      token,\n    );\n    if (!startResponse.ok) {\n      return startResponse as SdkResponse<ResponseData>;\n    }\n    const createResponse = await create(startResponse.data.options);\n    const finishResponse = await sdk.webauthn.update.finish(\n      startResponse.data.transactionId,\n      createResponse,\n    );\n    return finishResponse;\n  },\n\n  /** Helper functions for working with WebAuthn browser APIs using JSON data */\n  helpers: {\n    /** Wraps the navigation.credentials.create call to translate JSON inputs and outputs */\n    create,\n    /** Wraps the navigation.credentials.get call to translate JSON inputs and outputs */\n    get,\n    /** Checks if the browser supports WebAuthn, and can optionally require in\n     * addition that the browser supports WebAuthn with built-in biometrics */\n    isSupported,\n    conditional,\n  },\n});\n\n// Helpers functions\n\nasync function create(options: string): Promise<string> {\n  const createOptions = decodeCreateOptions(options);\n  const createResponse = (await navigator.credentials.create(\n    createOptions,\n  )) as AttestationPublicKeyCredential;\n  return encodeCreateResponse(createResponse);\n}\n\nasync function get(options: string): Promise<string> {\n  const getOptions = decodeGetOptions(options);\n  const getResponse = (await navigator.credentials.get(\n    getOptions,\n  )) as AssertionPublicKeyCredential;\n  return encodeGetResponse(getResponse);\n}\n\n/**\n * This function should be used in passkeys autofill (conditional UI)\n * It handles the call to \"navigator.credentials.get\" and adds the required options\n * @param options webauthn start options\n * @param abort: AbortController instance\n * @returns encoded \"navigator.credentials.get\" response\n */\nasync function conditional(\n  options: string,\n  abort: AbortController,\n): Promise<string> {\n  const getOptions = decodeGetOptions(options);\n  getOptions.signal = abort.signal;\n  getOptions.mediation = 'conditional' as any;\n  const getResponse = (await navigator.credentials.get(\n    getOptions,\n  )) as AssertionPublicKeyCredential;\n  return encodeGetResponse(getResponse);\n}\n\n// eslint-disable-next-line import/exports-last\nexport async function isSupported(\n  requirePlatformAuthenticator: boolean = false,\n): Promise<boolean> {\n  if (!IS_BROWSER) {\n    return Promise.resolve(false);\n  }\n  const supported = !!(\n    window.PublicKeyCredential &&\n    navigator.credentials &&\n    navigator.credentials.create &&\n    navigator.credentials.get\n  );\n  if (\n    supported &&\n    requirePlatformAuthenticator &&\n    PublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable\n  ) {\n    return PublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable();\n  }\n  return supported;\n}\n\n// Conversion of data structures for Create/Attestation/Register ceremony\n\ntype AttestationPublicKeyCredential = PublicKeyCredential & {\n  response: AuthenticatorAttestationResponse;\n};\n\nfunction decodeCreateOptions(value: string): CredentialCreationOptions {\n  const options = JSON.parse(value);\n  options.publicKey.challenge = decodeBase64Url(options.publicKey.challenge);\n  options.publicKey.user.id = decodeBase64Url(options.publicKey.user.id);\n  options.publicKey.excludeCredentials?.forEach((item: any) => {\n    item.id = decodeBase64Url(item.id);\n  });\n  return options;\n}\n\nfunction encodeCreateResponse(\n  credential: AttestationPublicKeyCredential,\n): string {\n  return JSON.stringify({\n    id: credential.id,\n    rawId: encodeBase64Url(credential.rawId),\n    type: credential.type,\n    response: {\n      attestationObject: encodeBase64Url(credential.response.attestationObject),\n      clientDataJSON: encodeBase64Url(credential.response.clientDataJSON),\n    },\n  });\n}\n\n// Conversion of data structures for Get/Assertion/Login ceremony\n\ntype AssertionPublicKeyCredential = PublicKeyCredential & {\n  response: AuthenticatorAssertionResponse;\n};\n\nfunction decodeGetOptions(value: string): CredentialRequestOptions {\n  const options = JSON.parse(value);\n  options.publicKey.challenge = decodeBase64Url(options.publicKey.challenge);\n  options.publicKey.allowCredentials?.forEach((item: any) => {\n    item.id = decodeBase64Url(item.id);\n  });\n  return options;\n}\n\nfunction encodeGetResponse(credential: AssertionPublicKeyCredential): string {\n  return JSON.stringify({\n    id: credential.id,\n    rawId: encodeBase64Url(credential.rawId),\n    type: credential.type,\n    response: {\n      authenticatorData: encodeBase64Url(credential.response.authenticatorData),\n      clientDataJSON: encodeBase64Url(credential.response.clientDataJSON),\n      signature: encodeBase64Url(credential.response.signature),\n      userHandle: credential.response.userHandle\n        ? encodeBase64Url(credential.response.userHandle)\n        : undefined,\n    },\n  });\n}\n\n// Conversion between ArrayBuffers and Base64Url strings\n\nfunction decodeBase64Url(value: string): ArrayBufferLike {\n  const base64 = value.replace(/_/g, '/').replace(/-/g, '+');\n  return Uint8Array.from(atob(base64), (c) => c.charCodeAt(0)).buffer;\n}\n\nfunction encodeBase64Url(value: ArrayBufferLike): string {\n  const base64 = btoa(String.fromCharCode.apply(null, new Uint8Array(value)));\n  return base64.replace(/\\//g, '_').replace(/\\+/g, '-').replace(/=/g, '');\n}\n\n// Exports\nexport default withCoreFns(createWebAuthn);\n","export const apiPaths = {\n  fedcm: {\n    config: '/fedcm/config',\n  },\n};\n","import { JWTResponse, SdkResponse, LoginOptions } from '@descope/core-js-sdk';\nimport { CoreSdk } from '../types';\nimport { IS_BROWSER } from '../constants';\nimport { apiPaths } from '../apiPaths';\n\n/**\n * Configuration for OneTap.\n */\ninterface OneTapConfig {\n  /** Whether to auto select. Optional. */\n  auto_select?: boolean;\n\n  /** Whether to cancel on tap outside. Optional. */\n  cancel_on_tap_outside?: boolean;\n\n  /** ID of the prompt parent. Optional. */\n  prompt_parent_id?: string;\n\n  /** Context. Optional. */\n  context?: 'signin' | 'signup' | 'use';\n\n  /** Callback function to handle the intermediate iframe close event. Optional. */\n  intermediate_iframe_close_callback?: () => void;\n\n  /** Whether to support ITP. Optional. */\n  itp_support?: boolean;\n\n  /** Login hint. Optional. */\n  login_hint?: string;\n\n  /** HD. Optional. */\n  hd?: string;\n\n  /** Whether to use FedCM for prompt. Optional. */\n  use_fedcm_for_prompt?: boolean;\n}\n\n/**\n * Response from the credential.\n */\ninterface CredentialResponse {\n  /** Credential. */\n  credential: string;\n\n  /** How the selection was made. */\n  select_by:\n    | 'auto'\n    | 'user'\n    | 'user_1tap'\n    | 'user_2tap'\n    | 'btn'\n    | 'btn_confirm'\n    | 'btn_add_session'\n    | 'btn_confirm_add_session';\n}\n\ninterface FedCMAssertionResponse {\n  token: string;\n  error: {\n    code: string;\n    url: string;\n  };\n}\n\ninterface IdentityProviderConfig {\n  configURL: string;\n  clientId: string;\n}\n\ntype IdentityCredentialRequestOptionsContext =\n  | 'signin'\n  | 'signup'\n  | 'use'\n  | 'continue';\n\ninterface IdentityProviderRequestOptions extends IdentityProviderConfig {\n  nonce?: string;\n  loginHint?: string;\n  domainHint?: string;\n}\n\ninterface IdentityCredentialRequestOptions {\n  providers: IdentityProviderRequestOptions[];\n  context?: IdentityCredentialRequestOptionsContext;\n}\n\ninterface FedCMCredentialRequestOptions {\n  identity?: IdentityCredentialRequestOptions;\n}\n\ntype OneTapInitialize = ({\n  client_id,\n  callback,\n  nonce,\n}: {\n  client_id: string;\n  callback: (res: CredentialResponse) => void;\n  nonce: string;\n} & OneTapConfig) => void;\n\ntype PromptNotification = {\n  isSkippedMoment: () => boolean;\n};\n\n/**\n * Constructs a higher level FedCM API that wraps the functions from code-js-sdk.\n * @param sdk The CoreSdk instance.\n * @returns The FedCM API.\n */\nconst createFedCM = (sdk: CoreSdk, projectId: string) => ({\n  async oneTap(\n    provider?: string,\n    oneTapConfig?: OneTapConfig,\n    loginOptions?: LoginOptions,\n    onSkip?: () => void,\n  ) {\n    const readyProvider = provider ?? 'google';\n    const startResponse = await sdk.oauth.startNative(\n      readyProvider,\n      loginOptions,\n      true,\n    );\n    if (!startResponse.ok) {\n      return startResponse as unknown as SdkResponse<JWTResponse>;\n    }\n\n    const { clientId, stateId, nonce } = startResponse.data;\n    const googleClient = await getGoogleClient();\n    return new Promise((resolve) => {\n      const callback = (res: CredentialResponse) => {\n        resolve(\n          sdk.oauth.finishNative(\n            readyProvider,\n            stateId,\n            '',\n            '',\n            res.credential,\n          ),\n        );\n      };\n\n      // initialize google client\n      googleClient.initialize({\n        ...oneTapConfig,\n        itp_support: oneTapConfig?.itp_support ?? true,\n        use_fedcm_for_prompt: oneTapConfig?.use_fedcm_for_prompt ?? true,\n        client_id: clientId,\n        callback,\n        nonce,\n      });\n\n      googleClient.prompt((notification) => {\n        if (notification?.isSkippedMoment()) {\n          onSkip?.();\n        }\n      });\n    });\n  },\n  async launch(\n    context?: IdentityCredentialRequestOptionsContext,\n  ): Promise<SdkResponse<JWTResponse>> {\n    const configURL = sdk.httpClient.buildUrl(\n      projectId + apiPaths.fedcm.config,\n    );\n    const req: FedCMCredentialRequestOptions = {\n      identity: {\n        context: context || 'signin',\n        providers: [\n          {\n            configURL,\n            clientId: projectId,\n          },\n        ],\n      },\n    };\n    const res = await navigator.credentials?.get(req as any);\n    return sdk.refresh((res as any as FedCMAssertionResponse).token);\n  },\n  isSupported(): boolean {\n    return IS_BROWSER && 'IdentityCredential' in window;\n  },\n});\n\n// Helpers functions\nasync function getGoogleClient(): Promise<{\n  initialize: OneTapInitialize;\n  prompt: (cb: (notification: PromptNotification) => void) => void;\n}> {\n  return new Promise((resolve, reject) => {\n    if ((window as any).google) {\n      resolve((window as any).google.accounts.id);\n      return;\n    }\n\n    /* istanbul ignore next */\n    let googleScript = document.getElementById(\n      'google-gsi-client-script',\n    ) as HTMLScriptElement;\n\n    /* istanbul ignore next */\n    if (!googleScript) {\n      googleScript = document.createElement('script');\n      document.head.appendChild(googleScript);\n      googleScript.async = true;\n      googleScript.defer = true;\n      googleScript.id = 'google-gsi-client-script';\n      googleScript.src = 'https://accounts.google.com/gsi/client';\n    }\n\n    /* istanbul ignore next */\n    googleScript.onload = function () {\n      if ((window as any).google) {\n        resolve((window as any).google.accounts.id);\n      } else {\n        reject('Failed to load Google GSI client script - not loaded properly');\n      }\n    };\n    /* istanbul ignore next */\n    googleScript.onerror = function () {\n      reject('Failed to load Google GSI client script - failed to load');\n    };\n  });\n}\n\nexport default createFedCM;\nexport type { OneTapConfig };\n","import { CoreSdk, ReplaceParam } from '../types';\nimport { isSupported } from './webauthn';\n\ntype CoreSdkFlowStartArgs = Parameters<CoreSdk['flow']['start']>;\ntype Options = Pick<\n  CoreSdkFlowStartArgs[1],\n  | 'tenant'\n  | 'redirectUrl'\n  | 'redirectAuth'\n  | 'oidcIdpStateId'\n  | 'samlIdpStateId'\n  | 'samlIdpUsername'\n  | 'ssoAppId'\n  | 'oidcLoginHint'\n  | 'preview'\n  | 'abTestingKey'\n  | 'client'\n  | 'locale'\n  | 'oidcPrompt'\n  | 'oidcErrorRedirectUri'\n> & {\n  lastAuth?: Omit<CoreSdkFlowStartArgs[1]['lastAuth'], 'loginId' | 'name'>;\n};\n\nconst START_OPTIONS_VERSION_PREFER_START_REDIRECT_URL = 1;\n\nexport default (coreSdk: CoreSdk) => ({\n  ...coreSdk.flow,\n  // wrap start fn and adds more data to the start options\n  start: async (...args: ReplaceParam<CoreSdkFlowStartArgs, '1', Options>) => {\n    const webAuthnSupport = await isSupported();\n    const decoratedOptions = {\n      location: window.location.href,\n      ...args[1],\n      deviceInfo: {\n        webAuthnSupport,\n      },\n      startOptionsVersion: START_OPTIONS_VERSION_PREFER_START_REDIRECT_URL,\n    };\n\n    args[1] = decoratedOptions;\n\n    return coreSdk.flow.start(...args);\n  },\n});\n","import createCoreSdk from '@descope/core-js-sdk';\nimport createWebAuthn from './webauthn';\nimport createFedCM from './fedcm';\nimport withFlow from './flow';\nimport { getSessionToken } from '../enhancers/withPersistTokens/helpers';\n\nconst createSdk = (...args: Parameters<typeof createCoreSdk>) => {\n  const coreSdk = createCoreSdk(...args);\n\n  return {\n    ...coreSdk,\n    refresh: (token?: string) => {\n      // Descope use this query param to monitor if refresh is made\n      // When the user is already logged in in the past or not (We want to optimize that in the future)\n      const currentSessionToken = getSessionToken();\n      return coreSdk.refresh(token, { dcs: currentSessionToken ? 't' : 'f' });\n    },\n    flow: withFlow(coreSdk),\n    webauthn: createWebAuthn(coreSdk),\n    fedcm: createFedCM(coreSdk, args[0].projectId),\n  };\n};\n\nexport default createSdk;\n\nexport type CreateWebSdk = typeof createSdk;\nexport type WebSdk = ReturnType<CreateWebSdk>;\n","import { compose } from './enhancers/helpers';\nimport { withAnalytics } from './enhancers/withAnalytics';\nimport { withAutoRefresh } from './enhancers/withAutoRefresh';\nimport { withFingerprint } from './enhancers/withFingerprint';\nimport { withLastLoggedInUser } from './enhancers/withLastLoggedInUser';\nimport { withNotifications } from './enhancers/withNotifications';\nimport withPersistTokens from './enhancers/withPersistTokens';\nimport createSdk from './sdk';\n\nconst decoratedCreateSdk = compose(\n  withFingerprint,\n  withAutoRefresh,\n  withAnalytics,\n  withNotifications,\n  withLastLoggedInUser, // must be one before last due to TS types\n  withPersistTokens, // must be last due to TS known limitation https://github.com/microsoft/TypeScript/issues/30727\n)(createSdk);\n\nexport type { UserResponse } from './types';\n\n// Note: make sure to update ./test/umd.test.ts when adding new constants\nexport {\n  REFRESH_TOKEN_KEY,\n  SESSION_TOKEN_KEY,\n} from './enhancers/withPersistTokens/constants';\n\nexport {\n  ensureFingerprintIds,\n  clearFingerprintData,\n} from './enhancers/withFingerprint/helpers';\n\nexport type { OneTapConfig } from './sdk/fedcm';\n\nexport default decoratedCreateSdk;\n","type Fn = (arg: any) => any;\n\nexport function compose<Input, A1>(\n  fn1: (input: Input) => A1,\n): (input: Input) => A1;\n\nexport function compose<Input, A1, A2>(\n  fn1: (input: Input) => A1,\n  fn2: (input: A1) => A2,\n): (input: Input) => A2;\n\nexport function compose<Input, A1, A2, A3>(\n  fn1: (input: Input) => A1,\n  fn2: (input: A1) => A2,\n  fn3: (input: A2) => A3,\n): (input: Input) => A3;\n\nexport function compose<Input, A1, A2, A3, A4>(\n  fn1: (input: Input) => A1,\n  fn2: (input: A1) => A2,\n  fn3: (input: A2) => A3,\n  fn4: (input: A3) => A4,\n): (input: Input) => A4;\n\nexport function compose<Input, A1, A2, A3, A4, A5>(\n  fn1: (input: Input) => A1,\n  fn2: (input: A1) => A2,\n  fn3: (input: A2) => A3,\n  fn4: (input: A3) => A4,\n  fn5: (input: A4) => A5,\n): (input: Input) => A5;\n\nexport function compose<Input, A1, A2, A3, A4, A5, A6>(\n  fn1: (input: Input) => A1,\n  fn2: (input: A1) => A2,\n  fn3: (input: A2) => A3,\n  fn4: (input: A3) => A4,\n  fn5: (input: A4) => A5,\n  fn6: (input: A5) => A6,\n): (input: Input) => A6;\n\nexport function compose<Input, A1, A2, A3, A4, A5, A6, A7>(\n  fn1: (input: Input) => A1,\n  fn2: (input: A1) => A2,\n  fn3: (input: A2) => A3,\n  fn4: (input: A3) => A4,\n  fn5: (input: A4) => A5,\n  fn6: (input: A5) => A6,\n  fn7: (input: A6) => A7,\n): (input: Input) => A7;\n\nexport function compose<Input, A1, A2, A3, A4, A5, A6, A7, A8>(\n  fn1: (input: Input) => A1,\n  fn2: (input: A1) => A2,\n  fn3: (input: A2) => A3,\n  fn4: (input: A3) => A4,\n  fn5: (input: A4) => A5,\n  fn6: (input: A5) => A6,\n  fn7: (input: A6) => A7,\n  fn8: (input: A7) => A8,\n): (input: Input) => A8;\n\nexport function compose<Input, A1, A2, A3, A4, A5, A6, A7, A8, A9>(\n  fn1: (input: Input) => A1,\n  fn2: (input: A1) => A2,\n  fn3: (input: A2) => A3,\n  fn4: (input: A3) => A4,\n  fn5: (input: A4) => A5,\n  fn6: (input: A5) => A6,\n  fn7: (input: A6) => A7,\n  fn8: (input: A7) => A8,\n  fn9: (input: A8) => A9,\n): (input: Input) => A9;\n\nexport function compose<Input, A1, A2, A3, A4, A5, A6, A7, A8, A9, A10>(\n  fn1: (input: Input) => A1,\n  fn2: (input: A1) => A2,\n  fn3: (input: A2) => A3,\n  fn4: (input: A3) => A4,\n  fn5: (input: A4) => A5,\n  fn6: (input: A5) => A6,\n  fn7: (input: A6) => A7,\n  fn8: (input: A7) => A8,\n  fn9: (input: A8) => A9,\n  fn10: (input: A9) => A10,\n): (input: Input) => A10;\n\n/**\n * Currently there is no way to create a compose function in Typescript without using overloading\n * This function currently support up to 10 wrappers\n * If needed you can add more by duplicating the type and add more parameters\n */\n\nexport function compose(...args: Fn[]) {\n  return (data: any) => args.reduce((acc, elem) => elem(acc), data) as any;\n}\n","import { SdkFnWrapper, wrapWith } from '@descope/core-js-sdk';\nimport { CreateWebSdk } from '../../sdk';\nimport { AfterRequestHook } from '../../types';\nimport { addHooks, getAuthInfoFromResponse } from '../helpers';\nimport {\n  createTimerFunctions,\n  getTokenExpiration,\n  millisecondsUntilDate,\n} from './helpers';\nimport { AutoRefreshOptions } from './types';\nimport logger from '../helpers/logger';\nimport { IS_BROWSER, MAX_TIMEOUT } from '../../constants';\nimport { getRefreshToken } from '../withPersistTokens/helpers';\n\n// The amount of time (ms) to trigger the refresh before session expires\nconst REFRESH_THRESHOLD = 20 * 1000; // 20 sec\n\n/**\n * Automatically refresh the session token before it expires\n * It uses the the refresh token that is extracted from API response to do that\n */\nexport const withAutoRefresh =\n  <T extends CreateWebSdk>(createSdk: T) =>\n  ({ autoRefresh, ...config }: Parameters<T>[0] & AutoRefreshOptions) => {\n    if (!autoRefresh) return createSdk(config);\n\n    // if we hold a single timer id, there might be a case where we override it before canceling the timer, this might cause many calls to refresh\n    // in order to prevent it, we hold a list of timers and cancel all of them when a new timer is set, which means we should have one active timer only at a time\n    const { clearAllTimers, setTimer } = createTimerFunctions();\n\n    // we need to hold the expiration time and the refresh token in order to refresh the session\n    // when the user comes back to the tab or from background/lock screen/etc.\n    let sessionExpiration: Date;\n    let refreshToken: string;\n    if (IS_BROWSER) {\n      document.addEventListener('visibilitychange', () => {\n        // tab becomes visible and the session is expired, do a refresh\n        if (\n          document.visibilityState === 'visible' &&\n          new Date() > sessionExpiration\n        ) {\n          logger.debug('Expiration time passed, refreshing session');\n          // We prefer the persisted refresh token over the one from the response\n          // for a case that the token was refreshed from another tab, this mostly relevant\n          // when the project uses token rotation\n          sdk.refresh(getRefreshToken() || refreshToken);\n        }\n      });\n    }\n\n    const afterRequest: AfterRequestHook = async (_req, res) => {\n      const { refreshJwt, sessionJwt } = await getAuthInfoFromResponse(res);\n\n      // if we got 401 we want to cancel all timers\n      if (res?.status === 401) {\n        logger.debug('Received 401, canceling all timers');\n        clearAllTimers();\n      } else if (sessionJwt) {\n        sessionExpiration = getTokenExpiration(sessionJwt);\n        if (!sessionExpiration) {\n          logger.debug('Could not extract expiration time from session token');\n          return;\n        }\n        refreshToken = refreshJwt;\n        let timeout =\n          millisecondsUntilDate(sessionExpiration) - REFRESH_THRESHOLD;\n\n        if (timeout > MAX_TIMEOUT) {\n          logger.debug(\n            `Timeout is too large (${timeout}ms), setting it to ${MAX_TIMEOUT}ms`,\n          );\n          timeout = MAX_TIMEOUT;\n        }\n        clearAllTimers();\n\n        const refreshTimeStr = new Date(\n          Date.now() + timeout,\n        ).toLocaleTimeString('en-US', { hour12: false });\n        logger.debug(\n          `Setting refresh timer for ${refreshTimeStr}. (${timeout}ms)`,\n        );\n\n        setTimer(() => {\n          logger.debug('Refreshing session due to timer');\n          // We prefer the persisted refresh token over the one from the response\n          // for a case that the token was refreshed from another tab, this mostly relevant\n          // when the project uses token rotation\n          sdk.refresh(getRefreshToken() || refreshJwt);\n        }, timeout);\n      }\n    };\n\n    const sdk = createSdk(addHooks(config, { afterRequest }));\n\n    const wrapper: SdkFnWrapper<{}> =\n      (fn) =>\n      async (...args) => {\n        const resp = await fn(...args);\n        logger.debug('Clearing all timers');\n        clearAllTimers();\n\n        return resp;\n      };\n\n    return wrapWith(sdk, ['logout', 'logoutAll'], wrapper);\n  };\n","import { CreateWebSdk } from '../sdk';\nimport { BeforeRequestHook } from '../types';\nimport { addHooks } from './helpers';\n\n// this is replaced in build time\ndeclare const BUILD_VERSION: string;\n/**\n * Adds analytics headers to requests\n */\nexport const withAnalytics =\n  <T extends CreateWebSdk>(createSdk: T) =>\n  (config: Parameters<T>[0]) =>\n    createSdk({\n      ...config,\n      baseHeaders: {\n        'x-descope-sdk-name': 'web-js',\n        'x-descope-sdk-version': BUILD_VERSION,\n        ...config.baseHeaders,\n      },\n    });\n","import sdk, { REFRESH_TOKEN_KEY, SESSION_TOKEN_KEY } from './index';\n\n// We export the tokens constant in this way so that umd bundles will have the constants as properties of the default export\n// But still can use the default export as a function (e.g. Descope({ projectId: 'pid'}))\nsdk['REFRESH_TOKEN_KEY'] = REFRESH_TOKEN_KEY;\nsdk['SESSION_TOKEN_KEY'] = SESSION_TOKEN_KEY;\n\nexport default sdk;\n"],"names":["addHooks","config","hooks","reduce","acc","key","concat","_a","getAuthInfoFromResponse","async","res","ok","body","clone","json","authInfo","getUserFromResponse","user","hasOwnProperty","undefined","isLocalStorage","localStorage","setLocalStorage","value","setItem","getLocalStorage","getItem","removeLocalStorage","removeItem","__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","call","apply","this","__rest","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","SuppressedError","InvalidTokenError","Error","base64UrlDecode","str","output","replace","decodeURIComponent","atob","m","code","charCodeAt","toString","toUpperCase","b64DecodeUnicode","err","jwtDecode","token","options","pos","header","part","split","decoded","message","JSON","parse","name","email","phone","o","a","r","l","start","finish","d","u","c","g","h","v","f","I","b","y","O","j","w","headers","entries","fromEntries","Headers","stringify","Body","url","Url","method","Method","title","Title","status","Status","build","keys","flatMap","join","P","get","delete","post","put","patch","R","path","baseUrl","queryParams","projectId","slice","forEach","x","Array","isArray","from","q","$","Authorization","T","A","baseConfig","logger","cookiePolicy","fetch","text","Promise","resolve","warn","log","statusText","U","beforeRequest","baseHeaders","credentials","afterRequest","transformResponse","trim","cookies","buildUrl","E","S","M","tenants","N","exp","Date","getTime","C","H","J","z","L","response","data","error","retryAfter","Number","parseInt","D","_","filter","F","validate","Z","test","B","K","V","Y","G","X","ee","te","ne","se","oe","ie","ae","re","le","pe","de","ue","exchange","loginOptions","ce","shift","ge","pollingIntervalMs","timeoutMs","Math","max","min","he","ve","sms","voice","whatsapp","fe","me","waiting","running","completed","failed","Ie","be","ye","ke","Oe","je","verify","signIn","loginId","URI","signUpOrIn","signUp","waitForSession","setInterval","pendingRef","clearInterval","clearTimeout","setTimeout","errorDescription","errorCode","update","we","Ue","Pe","flowId","conditionInteractionId","interactionId","version","componentsVersion","input","next","executionId","stepId","Re","xe","qe","$e","Te","Ae","Ee","Se","facebook","github","google","microsoft","gitlab","apple","discord","linkedin","slack","Me","Ne","provider","redirectURL","startNative","implicit","finishNative","stateId","idToken","Ce","He","Je","ze","Le","De","_e","Fe","Ze","tenant","Be","Ke","Qe","Ve","Ye","Ge","We","Xe","et","tt","nt","st","password","sendReset","redirectUrl","templateOptions","newPassword","oldPassword","policy","ot","it","at","rt","lt","pt","dt","ut","ct","origin","transactionId","gt","ht","vt","ft","mt","It","yt","kt","String","Q","accessKey","otp","magicLink","enchantedLink","oauth","saml","totp","notp","webauthn","flow","refresh","selectTenant","logout","logoutAll","myTenants","dct","ids","history","isJwtExpired","getTenants","getJwtPermissions","getJwtRoles","httpClient","allSettled","map","reason","Ot","DeliveryMethods","args","console","debug","IS_BROWSER","window","MAX_TIMEOUT","pow","target","source","api","init","converter","defaultAttributes","set","attributes","document","expires","now","toUTCString","encodeURIComponent","escape","stringifiedAttributes","attributeName","cookie","write","create","jar","parts","found","read","remove","withAttributes","withConverter","freeze","SESSION_TOKEN_KEY","REFRESH_TOKEN_KEY","setJwtTokenCookie","cookiePath","cookieDomain","cookieExpiration","domainMatches","currentDomainParts","location","hostname","cookieDomainParts","isCurrentDomainOrParentDomain","Cookies","domain","sameSite","secure","getRefreshToken","prefix","getSessionToken","clearTokens","FP_EP_URL","default","to","pack","ar","current","postpone","push","exclude","random","Set","has","add","reject","TypeError","startedAt","finishedAt","then","catch","scriptUrlPattern","apiKey","time","state","visibilityState","addEventListener","removeEventListener","load","ldi","attempts","visibilityStates","URL","href","blockedURI","protocol","MessageChannel","port1","onmessage","port2","postMessage","createElement","parentNode","removeChild","head","getElementsByTagName","onload","onerror","src","appendChild","k","getOwnPropertyDescriptor","configurable","writable","getFPFromStorage","returnExpired","itemStr","item","expiry","ensureFingerprintIds","fpKey","sessionId","substring","endpointUrl","pathname","patterUrl","agentP","endpoint","defaultEndpoint","defaultScriptUrlPattern","agent","requestId","linkedId","fpData","vsid","vrid","createFingerprintObject","setFPToStorage","ex","LOCAL_STORAGE_LAST_USER_LOGIN_ID","LOCAL_STORAGE_LAST_USER_DISPLAY_NAME","getLastUserLoginId","getLastUserDisplayName","startWrapper","fn","displayName","lastAuth","logoutWrapper","keepOnLogout","resp","createPubSub","cbs","pub","cb","sub","idx","splice","wrapper","createOptions","publicKey","challenge","decodeBase64Url","id","excludeCredentials","decodeCreateOptions","createResponse","navigator","credential","rawId","encodeBase64Url","type","attestationObject","clientDataJSON","getOptions","decodeGetOptions","encodeGetResponse","conditional","abort","signal","mediation","isSupported","requirePlatformAuthenticator","supported","PublicKeyCredential","isUserVerifyingPlatformAuthenticatorAvailable","allowCredentials","authenticatorData","signature","userHandle","base64","Uint8Array","buffer","btoa","fromCharCode","creator","createWebAuthn$1","sdk","identifier","startResponse","getResponse","helpers","obj","apiPaths","createFedCM","oneTapConfig","onSkip","readyProvider","clientId","nonce","googleClient","accounts","googleScript","getElementById","defer","getGoogleClient","initialize","itp_support","use_fedcm_for_prompt","_b","client_id","callback","prompt","notification","isSkippedMoment","context","req","identity","providers","configURL","withFlow","coreSdk","webAuthnSupport","decoratedOptions","deviceInfo","startOptionsVersion","decoratedCreateSdk","elem","compose","createSdk","fpLoad","autoRefresh","clearAllTimers","setTimer","timerIds","pop","timeout","createTimerFunctions","sessionExpiration","refreshToken","_req","refreshJwt","sessionJwt","claims","getTokenExpiration","date","refreshTimeStr","toLocaleTimeString","hour12","wrapWith","sessionPS","userPS","userDetails","wrappedSdk","onSessionTokenChange","onUserChange","storeLastAuthenticatedUser","keepLastAuthenticatedUserAfterLogout","loginIds","setLastUserLoginId","setLastUserDisplayName","persistTokens","isPersistTokens","sessionTokenViaCookie","storagePrefix","isManagementApi","cookieParams","createCoreSdk","currentSessionToken","dcs","createWebAuthn","fedcm"],"mappings":"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","x_google_ignoreList":[1,2,7,11]}